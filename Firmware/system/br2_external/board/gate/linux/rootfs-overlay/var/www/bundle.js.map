{
  "version": 3,
  "sources": ["../src/api.ts", "../src/i18n.ts", "../src/auth.ts", "../src/index.ts"],
  "sourcesContent": ["/**\n * \u041F\u0440\u043E\u0441\u0442\u0430\u044F \u043E\u0431\u0451\u0440\u0442\u043A\u0430 \u0434\u043B\u044F \u0432\u0437\u0430\u0438\u043C\u043E\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0441 CGI \u0447\u0435\u0440\u0435\u0437 GET/POST.\n * \u041F\u0440\u0435\u0434\u043F\u043E\u043B\u0430\u0433\u0430\u0435\u043C, \u0447\u0442\u043E \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0435\u0441\u0442\u044C CGI-\u0441\u043A\u0440\u0438\u043F\u0442\u044B \u043F\u043E \u0430\u0434\u0440\u0435\u0441\u0443 /cgi-bin/...\n * \u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u044F \u043F\u043E \u0441\u043E\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u044E:\n *   GET  /cgi-bin/<section>/info        \u2014 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044E \u0440\u0430\u0437\u0434\u0435\u043B\u0430\n *   POST /cgi-bin/<section>/apply       \u2014 \u043F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C/\u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044E (form-urlencoded)\n * \u041E\u0442\u0432\u0435\u0442\u044B \u0436\u0435\u043B\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0432 JSON (Content-Type: application/json),\n * \u0430 \u043F\u0440\u0438 \u043E\u0448\u0438\u0431\u043A\u0430\u0445 \u2014 \u0441\u0442\u0430\u0442\u0443\u0441 4xx/5xx \u0438 JSON \u0441 \u043F\u043E\u043B\u0435\u043C message.\n */\n\nexport type Dict = Record<string, string | number | boolean | null | undefined>;\n\nexport class ApiError extends Error {\n  constructor(public status: number, message: string) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\n// \u041E\u043F\u0440\u0435\u0434\u0435\u043B\u044F\u0435\u043C \u0431\u0430\u0437\u043E\u0432\u044B\u0439 \u043F\u0443\u0442\u044C \u0434\u043E CGI. \u041C\u043E\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0433\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 window.CGI_BASE\nfunction detectBase(): string {\n  try {\n    if (typeof window !== 'undefined') {\n      const w = window as unknown as { CGI_BASE?: unknown; __CGI_BASE__?: unknown };\n      if (typeof w.CGI_BASE === 'string' && w.CGI_BASE) return w.CGI_BASE;\n      if (typeof w.__CGI_BASE__ === 'string' && w.__CGI_BASE__) return w.__CGI_BASE__;\n    }\n  } catch {}\n  return '/cgi-bin';\n}\n\nexport function isOffline(): boolean {\n  // \u0415\u0441\u043B\u0438 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043E\u0442\u043A\u0440\u044B\u0442\u0430 \u043A\u0430\u043A file:// \u0438\u043B\u0438 \u043D\u0435\u0442 \u0441\u0435\u0442\u0438 \u2014 \u0441\u0447\u0438\u0442\u0430\u0435\u043C \u043E\u0444\u0444\u043B\u0430\u0439\u043D-\u0440\u0435\u0436\u0438\u043C\u043E\u043C.\n  return typeof window !== 'undefined' && (window.location.protocol === 'file:' || !navigator.onLine);\n}\n\nfunction buildQuery(params?: Dict): string {\n  if (!params) return '';\n  const usp = new URLSearchParams();\n  for (const [k, v] of Object.entries(params)) {\n    if (v === undefined || v === null) continue;\n    usp.set(k, String(v));\n  }\n  const q = usp.toString();\n  return q ? `?${q}` : '';\n}\n\nfunction joinUrl(base: string, path: string): string {\n  if (/^https?:\\/\\//i.test(path)) return path;\n  const b = base.endsWith('/') ? base.slice(0, -1) : base;\n  const p = path.startsWith('/') ? path : `/${path}`;\n  return `${b}${p}`;\n}\n\nasync function withTimeout<T>(promise: Promise<T>, ms: number): Promise<T> {\n  if (!ms) return promise;\n  const ctl = new AbortController();\n  const t = setTimeout(() => ctl.abort(), ms);\n  try {\n    const res = await promise;\n    clearTimeout(t);\n    return res;\n  } catch (e) {\n    clearTimeout(t);\n    throw e;\n  }\n}\n\nexport type ApiOptions = {\n  baseUrl?: string;      // \u0411\u0430\u0437\u0430 \u0434\u043B\u044F CGI. \u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E /cgi-bin\n  timeoutMs?: number;    // \u0422\u0430\u0439\u043C\u0430\u0443\u0442 \u0437\u0430\u043F\u0440\u043E\u0441\u043E\u0432\n};\n\nclass ApiClient {\n  private baseUrl: string;\n  private timeoutMs: number;\n  private onUnauthorizedCb?: () => void;\n\n  constructor(opts?: ApiOptions) {\n    this.baseUrl = opts?.baseUrl ?? detectBase();\n    this.timeoutMs = opts?.timeoutMs ?? 8000;\n  }\n\n  onUnauthorized(cb: () => void) {\n    this.onUnauthorizedCb = cb;\n  }\n\n  async get<T = unknown>(path: string, params?: Dict): Promise<T> {\n    if (isOffline()) {\n      // \u0412 \u043E\u0444\u0444\u043B\u0430\u0439\u043D-\u0440\u0435\u0436\u0438\u043C\u0435 \u043D\u0435 \u0445\u043E\u0434\u0438\u043C \u0432 \u0441\u0435\u0442\u044C \u2014 \u043F\u0443\u0441\u0442\u044C UI \u0440\u0435\u0448\u0438\u0442, \u0447\u0442\u043E \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C.\n      return Promise.reject(new Error('offline'));\n    }\n    const url = joinUrl(this.baseUrl, `${path}${buildQuery(params)}`);\n    const req = fetch(url, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Cache-Control': 'no-cache',\n      },\n      credentials: 'same-origin',\n    }).then(async (r) => {\n      if (!r.ok) {\n        const ct = r.headers.get('content-type') || '';\n        let details = '';\n        if (ct.includes('application/json')) {\n          try {\n            const j = await r.json();\n            if (j && typeof j === 'object' && 'message' in j && typeof (j as any).message === 'string') {\n              details = (j as any).message;\n            } else {\n              details = JSON.stringify(j);\n            }\n          } catch {}\n        } else {\n          const text = await r.text().catch(() => '');\n          const m = /<title>(.*?)<\\/title>/i.exec(text);\n          details = m ? m[1] : '';\n        }\n        const msg = [`HTTP ${r.status}${r.statusText ? ' ' + r.statusText : ''}`, details ? `\u2014 ${details}` : '', `at ${url}`]\n          .filter(Boolean)\n          .join(' ');\n\n        if (r.status === 401 && this.onUnauthorizedCb) {\n          this.onUnauthorizedCb();\n        }\n        throw new ApiError(r.status, msg);\n      }\n      const ct = r.headers.get('content-type') || '';\n      if (ct.includes('application/json')) return r.json() as Promise<T>;\n      // \u0415\u0441\u043B\u0438 \u043F\u0440\u0438\u0448\u0451\u043B \u043D\u0435 JSON \u2014 \u0432\u0435\u0440\u043D\u0451\u043C \u0442\u0435\u043A\u0441\u0442.\n      return (r.text() as unknown) as T;\n    });\n    return withTimeout(req, this.timeoutMs);\n  }\n\n  async postForm<T = unknown>(path: string, data: Dict): Promise<T> {\n    if (isOffline()) {\n      return Promise.reject(new Error('offline'));\n    }\n    const url = joinUrl(this.baseUrl, path);\n    const body = new URLSearchParams();\n    Object.entries(data).forEach(([k, v]) => {\n      if (v === undefined || v === null) return;\n      body.set(k, String(v));\n    });\n    const req = fetch(url, {\n      method: 'POST',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n        'Accept': 'application/json, text/plain, */*',\n      },\n      body,\n    }).then(async (r) => {\n      if (!r.ok) {\n        const ct = r.headers.get('content-type') || '';\n        let details = '';\n        if (ct.includes('application/json')) {\n          try {\n            const j = await r.json();\n            if (j && typeof j === 'object' && 'message' in j && typeof (j as any).message === 'string') {\n              details = (j as any).message;\n            } else {\n              details = JSON.stringify(j);\n            }\n          } catch {}\n        } else {\n          const text = await r.text().catch(() => '');\n          const m = /<title>(.*?)<\\/title>/i.exec(text);\n          details = m ? m[1] : '';\n        }\n        const msg = [`HTTP ${r.status}${r.statusText ? ' ' + r.statusText : ''}`, details ? `\u2014 ${details}` : '', `at ${url}`]\n          .filter(Boolean)\n          .join(' ');\n\n        if (r.status === 401 && this.onUnauthorizedCb) {\n          this.onUnauthorizedCb();\n        }\n        throw new ApiError(r.status, msg);\n      }\n      const ct = r.headers.get('content-type') || '';\n      if (ct.includes('application/json')) return r.json() as Promise<T>;\n      return (r.text() as unknown) as T;\n    });\n    return withTimeout(req, this.timeoutMs);\n  }\n}\n\nexport const API = new ApiClient();\n", "\nexport type Lang = 'ru' | 'en';\n\nexport const availableLanguages: { value: Lang, label: string }[] = [\n    { value: 'ru', label: 'RU' },\n    { value: 'en', label: 'EN' }\n];\n\nexport const translations: Record<Lang, Record<string, string>> = {\n    ru: {\n        'app_title': 'RNS Gate \u2014 Configurator',\n        'save': '\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C',\n        'add': '\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C',\n        'delete': '\u0423\u0434\u0430\u043B\u0438\u0442\u044C',\n        'fill_actual': '\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0430\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435',\n        'fill_actual_title': '\u0417\u0430\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0438 \u043F\u043E\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0430\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0440\u0430\u0437\u0434\u0435\u043B\u0430',\n        'saving': '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435...',\n        'saved': '\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u044B.',\n        'save_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F',\n        'unsaved_changes': '\u0415\u0441\u0442\u044C \u043D\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0451\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F',\n        'settings_applied': '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u044B',\n        'offline_mode': 'Offline \u0440\u0435\u0436\u0438\u043C',\n        'online_mode': 'Online \u0440\u0435\u0436\u0438\u043C',\n        'interfaces': '\u0418\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044B',\n        'wifi': 'WiFi',\n        'ethernet': 'Ethernet',\n        'lora': 'LoRA',\n        'not_selected': '\u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D',\n        'interface_name': '\u0418\u043C\u044F \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430',\n        'interface': '\u0418\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441',\n        'interfaces_saved': '\u0418\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B',\n        'eth_applied': '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Ethernet \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u044B',\n        'freedv_applied': '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 FreeDV \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u044B',\n        'wifi_applied': '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 WiFi \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u044B',\n        'type_settings': '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0442\u0438\u043F\u0430',\n        'invalid_ldpc': '\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 LDPC',\n        'invalid_mode': '\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 Mode',\n        'invalid_rate': '\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 Rate',\n        'invalid_mask': '\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0430\u044F \u043C\u0430\u0441\u043A\u0430',\n        'invalid_dns1': '\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 DNS1',\n        'invalid_dns2': '\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 DNS2',\n        'invalid_ip': '\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 IP \u0430\u0434\u0440\u0435\u0441',\n        'invalid_gw': '\u041D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u0448\u043B\u044E\u0437',\n        'no_rnsd_data': '\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u043E RNSD.',\n        'num_or_name': '\u043D\u043E\u043C\u0435\u0440 \u0438\u043B\u0438 \u0438\u043C\u044F',\n        'updating': '\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435...',\n        'online': '\u041E\u043D\u043B\u0430\u0439\u043D',\n        'offline': '\u041E\u0444\u0444\u043B\u0430\u0439\u043D',\n        'offline_cgi_unavailable': '\u041E\u0444\u0444\u043B\u0430\u0439\u043D \u0440\u0435\u0436\u0438\u043C: CGI \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B',\n        'offline_save_unavailable': '\u041E\u0444\u0444\u043B\u0430\u0439\u043D \u0440\u0435\u0436\u0438\u043C: \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043D\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E',\n        'offline_save_unavailable_short': '\u041E\u0444\u0444\u043B\u0430\u0439\u043D \u0440\u0435\u0436\u0438\u043C \u2014 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E',\n        'clear_form_title': '\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0444\u043E\u0440\u043C\u044B (\u043B\u043E\u043A\u0430\u043B\u044C\u043D\u043E)',\n        'clear_fields': '\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043F\u043E\u043B\u044F',\n        'error': '\u041E\u0448\u0438\u0431\u043A\u0430',\n        'eth_save_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F Ethernet',\n        'freedv_save_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F FreeDV',\n        'wifi_save_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F WiFi',\n        'pass_too_short': '\u041F\u0430\u0440\u043E\u043B\u044C \u043D\u0435 \u043A\u043E\u0440\u043E\u0447\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432',\n        'show_pass': '\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C',\n        'hide_pass': '\u0421\u043A\u0440\u044B\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C',\n        'type': '\u0422\u0438\u043F',\n        'specify_ssid': '\u0423\u043A\u0430\u0436\u0438\u0442\u0435 SSID',\n        'requesting': '\u0412\u044B\u043F\u043E\u043B\u043D\u044F\u0435\u0442\u0441\u044F \u0437\u0430\u043F\u0440\u043E\u0441\u2026',\n        'interfaces_list': '\u0421\u043F\u0438\u0441\u043E\u043A \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043E\u0432',\n        'no_name': '\u0431\u0435\u0437 \u0438\u043C\u0435\u043D\u0438',\n        'no_interfaces_added': '\u0418\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044B \u043D\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B. \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u00AB\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C\u00BB.',\n        'ssid': '\u0418\u043C\u044F \u0441\u0435\u0442\u0438',\n        'password': '\u041F\u0430\u0440\u043E\u043B\u044C (WPA2)',\n\n        'address_mode': '\u0420\u0435\u0436\u0438\u043C \u0430\u0434\u0440\u0435\u0441\u0430\u0446\u0438\u0438',\n        'static': '\u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439',\n        'dhcp': 'DHCP',\n        'ip_address': 'IP \u0430\u0434\u0440\u0435\u0441',\n        'mask': '\u041C\u0430\u0441\u043A\u0430',\n        'gateway': '\u0428\u043B\u044E\u0437',\n        'client': '\u041A\u043B\u0438\u0435\u043D\u0442',\n        'ap': '\u0422\u043E\u0447\u043A\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u0430',\n        'load_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438',\n        'ip_settings': 'IP-\u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438',\n        'mode': '\u0420\u0435\u0436\u0438\u043C',\n        'password_label': '\u041F\u0430\u0440\u043E\u043B\u044C',\n        'login_title': '\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F',\n        'login': '\u0412\u043E\u0439\u0442\u0438',\n        'register': '\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F',\n        'username': '\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F',\n        'password_confirm': '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C',\n        'no_account': '\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044C',\n        'have_account': '\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442? \u0412\u043E\u0439\u0434\u0438\u0442\u0435',\n        'auth_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438',\n        'reg_error': '\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438',\n        'pass_mismatch': '\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442',\n        'section_placeholder': '\u2014 \u0437\u0434\u0435\u0441\u044C \u043F\u043E\u0437\u0436\u0435 \u043F\u043E\u044F\u0432\u044F\u0442\u0441\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438',\n        'users': '\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438',\n        'limit_one_config': '\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0435: \u043E\u0434\u0438\u043D \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441',\n        'add_user': '\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F',\n        'user_management': '\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C\u0438',\n        'registration_closed': '\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u0437\u0430\u043A\u0440\u044B\u0442\u0430. \u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443.',\n\n        'label_bandwidth': '\u041F\u043E\u043B\u043E\u0441\u0430 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u043D\u0438\u044F (kHz)',\n        'label_bind_host': 'Bind host',\n        'label_busy_chip': 'Busy Chip',\n        'label_busy_pin': 'Busy Pin',\n        'label_coding_rate': 'Coding Rate',\n        'label_freedv': 'FreeDV',\n        'label_frequency': '\u0427\u0430\u0441\u0442\u043E\u0442\u0430 (MHz)',\n        'label_host': '\u0425\u043E\u0441\u0442',\n        'label_irq_chip': 'IRQ Chip',\n        'label_irq_pin': 'IRQ Pin',\n        'label_ldpc': 'LDPC',\n        'label_loraspi': 'LoraSPI',\n        'label_mode': '\u0420\u0435\u0436\u0438\u043C',\n        'label_nrst_chip': 'NRST Chip',\n        'label_nrst_pin': 'NRST Pin',\n        'label_port': '\u041F\u043E\u0440\u0442',\n        'label_radio_preset': '\u041F\u0440\u0435\u0441\u0435\u0442 \u0440\u0430\u0434\u0438\u043E',\n        'label_rate': '\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C',\n        'label_rnode': 'RNode',\n        'label_rx_en_chip': 'RX EN Chip',\n        'label_rx_en_pin': 'RX EN Pin',\n        'label_serial_port': '\u0421\u0435\u0440\u0438\u0439\u043D\u044B\u0439 \u043F\u043E\u0440\u0442',\n        'label_spi_chip': 'SPI Chip',\n        'label_spi_pin': 'SPI Pin',\n        'label_spread_factor': 'Spread Factor',\n        'label_autointerface': '\u0410\u0432\u0442\u043E \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441',\n        'label_tcp_client': 'TCP \u043A\u043B\u0438\u0435\u043D\u0442',\n        'label_tcp_server': 'TCP \u0441\u0435\u0440\u0432\u0435\u0440',\n        'label_tx_en_chip': 'TX EN Chip',\n        'label_tx_en_pin': 'TX EN Pin',\n        'label_tx_power': '\u041C\u043E\u0449\u043D\u043E\u0441\u0442\u044C (dBm)',\n    },\n    en: {\n        'app_title': 'RNS Gate \u2014 Configurator',\n        'save': 'Save',\n        'add': 'Add',\n        'delete': 'Delete',\n        'fill_actual': 'Fill actual data',\n        'fill_actual_title': 'Request and fill actual values for the current section',\n        'saving': 'Saving...',\n        'saved': 'Changes sent.',\n        'save_error': 'Save error',\n        'unsaved_changes': 'There are unsaved changes',\n        'settings_applied': 'Settings applied',\n        'offline_mode': 'Offline mode',\n        'online_mode': 'Online mode',\n        'interfaces': 'Interfaces',\n        'wifi': 'WiFi',\n        'ethernet': 'Ethernet',\n        'lora': 'LoRA',\n        'not_selected': 'not selected',\n        'interface_name': 'Interface name',\n        'interface': 'Interface',\n        'interfaces_saved': 'Interfaces saved',\n        'eth_applied': 'Ethernet settings applied',\n        'freedv_applied': 'FreeDV settings applied',\n        'wifi_applied': 'WiFi settings applied',\n        'type_settings': 'Type settings',\n        'invalid_ldpc': 'Invalid LDPC',\n        'invalid_mode': 'Invalid Mode',\n        'invalid_rate': 'Invalid Rate',\n        'invalid_mask': 'Invalid mask',\n        'invalid_dns1': 'Invalid DNS1',\n        'invalid_dns2': 'Invalid DNS2',\n        'invalid_ip': 'Invalid IP address',\n        'invalid_gw': 'Invalid gateway',\n        'no_rnsd_data': 'No RNSD data.',\n        'num_or_name': 'number or name',\n        'updating': 'Updating...',\n        'online': 'Online',\n        'offline': 'Offline',\n        'offline_cgi_unavailable': 'Offline mode: CGI unavailable',\n        'offline_save_unavailable': 'Offline mode: saving to device unavailable',\n        'offline_save_unavailable_short': 'Offline mode \u2014 saving unavailable',\n        'clear_form_title': 'Clear current form values (locally)',\n        'clear_fields': 'Clear fields',\n        'error': 'Error',\n        'eth_save_error': 'Ethernet save error',\n        'freedv_save_error': 'FreeDV save error',\n        'wifi_save_error': 'WiFi save error',\n        'pass_too_short': 'Password must be at least 8 characters',\n        'show_pass': 'Show password',\n        'hide_pass': 'Hide password',\n        'type': 'Type',\n        'specify_ssid': 'Specify SSID',\n        'requesting': 'Requesting\u2026',\n        'interfaces_list': 'Interfaces list',\n        'no_name': 'no name',\n        'no_interfaces_added': 'No interfaces added. Click \"Add\".',\n        'ssid': 'Network name (SSID)',\n        'password': 'Password (WPA2)',\n\n        'address_mode': 'Address mode',\n        'static': 'Static',\n        'dhcp': 'DHCP',\n        'ip_address': 'IP address',\n        'mask': 'Mask',\n        'gateway': 'Gateway',\n        'client': 'Client',\n        'ap': 'Access Point',\n        'load_error': 'Load error',\n        'ip_settings': 'IP settings',\n        'mode': 'Mode',\n        'password_label': 'Password',\n        'login_title': 'Authorization',\n        'login': 'Login',\n        'register': 'Register',\n        'username': 'Username',\n        'password_confirm': 'Confirm password',\n        'no_account': 'No account? Register',\n        'have_account': 'Already have an account? Login',\n        'auth_error': 'Authorization error',\n        'reg_error': 'Registration error',\n        'pass_mismatch': 'Passwords do not match',\n        'section_placeholder': '\u2014 settings will appear here later',\n        'users': 'Users',\n        'limit_one_config': 'Limit: one interface',\n        'add_user': 'Add user',\n        'user_management': 'User management',\n        'registration_closed': 'Registration is closed. Contact the administrator.',\n\n        'label_bandwidth': 'Bandwidth (kHz)',\n        'label_bind_host': 'Bind host',\n        'label_busy_chip': 'Busy Chip',\n        'label_busy_pin': 'Busy Pin',\n        'label_coding_rate': 'Coding Rate',\n        'label_freedv': 'FreeDV',\n        'label_frequency': 'Frequency (MHz)',\n        'label_host': 'Host',\n        'label_irq_chip': 'IRQ Chip',\n        'label_irq_pin': 'IRQ Pin',\n        'label_ldpc': 'LDPC',\n        'label_loraspi': 'LoraSPI',\n        'label_mode': 'Mode',\n        'label_nrst_chip': 'NRST Chip',\n        'label_nrst_pin': 'NRST Pin',\n        'label_port': 'Port',\n        'label_radio_preset': 'Radio Preset',\n        'label_rate': 'Rate',\n        'label_rnode': 'RNode',\n        'label_rx_en_chip': 'RX EN Chip',\n        'label_rx_en_pin': 'RX EN Pin',\n        'label_serial_port': 'Serial Port',\n        'label_spi_chip': 'SPI Chip',\n        'label_spi_pin': 'SPI Pin',\n        'label_spread_factor': 'Spread Factor',\n        'label_autointerface': 'Auto Interface',\n        'label_tcp_client': 'TCP Client',\n        'label_tcp_server': 'TCP Server',\n        'label_tx_en_chip': 'TX EN Chip',\n        'label_tx_en_pin': 'TX EN Pin',\n        'label_tx_power': 'TX Power (dBm)',\n    }\n};\n\nlet currentLang: Lang = (localStorage.getItem('lang') as Lang) || 'ru';\n\nexport function getLang(): Lang {\n    return currentLang;\n}\n\nexport function setLang(lang: Lang) {\n    currentLang = lang;\n    localStorage.setItem('lang', lang);\n    location.reload();\n}\n\nexport function t(key: string): string {\n    return translations[currentLang][key] || translations['ru'][key] || key;\n}\n", "import { API, isOffline, ApiError } from './api';\nimport { t } from './i18n';\n\nexport interface AuthStatus {\n  authenticated: boolean;\n  username?: string;\n  is_admin?: boolean;\n  no_users?: boolean;\n}\n\nexport class Auth {\n  private static instance: Auth;\n  private app: HTMLElement | null = null;\n  private onAuthenticated: (() => void) | null = null;\n  private user: { username: string, is_admin: boolean } | null = null;\n\n  private constructor() {\n    this.app = document.getElementById('app');\n    // \u0415\u0441\u043B\u0438 \u043B\u044E\u0431\u043E\u0439 \u0437\u0430\u043F\u0440\u043E\u0441 \u0432\u0435\u0440\u043D\u0435\u0442 401, \u043F\u0435\u0440\u0435\u043A\u0438\u0434\u044B\u0432\u0430\u0435\u043C \u043D\u0430 \u043B\u043E\u0433\u0438\u043D\n    API.onUnauthorized(() => {\n      this.user = null;\n      this.renderLogin();\n    });\n  }\n\n  public static getInstance(): Auth {\n    if (!Auth.instance) {\n      Auth.instance = new Auth();\n    }\n    return Auth.instance;\n  }\n\n  public isAdmin(): boolean {\n    return this.user?.is_admin || false;\n  }\n\n  public getCurrentUser(): string | null {\n    return this.user?.username || null;\n  }\n\n  public async checkAuth(callback: () => void) {\n    this.onAuthenticated = callback;\n    \n    if (isOffline()) {\n      // \u0412 \u043E\u0444\u0444\u043B\u0430\u0439\u043D \u0440\u0435\u0436\u0438\u043C\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u0435\u043C \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044E, \u0442\u0430\u043A \u043A\u0430\u043A CGI \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D\n      callback();\n      return;\n    }\n\n    try {\n      // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C \u0441\u0442\u0430\u0442\u0443\u0441 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 CGI\n      const status = await API.get<AuthStatus>('/auth/status');\n      if (status && status.authenticated) {\n        this.user = { \n            username: status.username || '', \n            is_admin: status.is_admin === true || (status.is_admin as any) === 1 || (status.is_admin as any) === '1'\n        };\n        callback();\n      } else {\n        if (status && status.no_users) {\n            // \u0415\u0441\u043B\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0432\u043E\u043E\u0431\u0449\u0435 \u043D\u0435\u0442 \u2014 \u0434\u0430\u0435\u043C \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E (\u0430\u0434\u043C\u0438\u043D\u0430)\n            this.renderRegister(true);\n        } else {\n            this.renderLogin();\n        }\n      }\n    } catch (e: any) {\n      // \u0415\u0441\u043B\u0438 \u044D\u0442\u043E \u043E\u0448\u0438\u0431\u043A\u0430 401 (Unauthorized) \u2014 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0444\u043E\u0440\u043C\u0443 \u0432\u0445\u043E\u0434\u0430.\n      // \u0415\u0441\u043B\u0438 \u043B\u044E\u0431\u0430\u044F \u0434\u0440\u0443\u0433\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 (\u0441\u0435\u0440\u0432\u0435\u0440 \u043B\u0435\u0436\u0438\u0442, \u0442\u0430\u0439\u043C\u0430\u0443\u0442 \u0438 \u0442.\u0434.) \u2014 \n      // \u0441\u0447\u0438\u0442\u0430\u0435\u043C \u044D\u0442\u043E \u043E\u0444\u0444\u043B\u0430\u0439\u043D-\u0440\u0435\u0436\u0438\u043C\u043E\u043C \u0438 \u043F\u0443\u0441\u043A\u0430\u0435\u043C \u0432 \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435.\n      if (e instanceof ApiError && e.status === 401) {\n        this.renderLogin();\n      } else {\n        console.warn('Auth check failed or server unreachable, proceeding in offline mode', e);\n        callback();\n      }\n    }\n  }\n\n  private renderLogin() {\n    if (!this.app) return;\n\n    this.app.innerHTML = `\n      <div class=\"auth-page\">\n        <div class=\"auth-card\">\n          <div class=\"auth-header\">\n            <h1>${t('login_title')}</h1>\n          </div>\n          <form id=\"login-form\" class=\"auth-form\">\n            <div class=\"auth-field\">\n              <label for=\"username\">${t('username')}</label>\n              <input type=\"text\" id=\"username\" required autocomplete=\"username\">\n            </div>\n            <div class=\"auth-field\">\n              <label for=\"password\">${t('password_label')}</label>\n              <input type=\"password\" id=\"password\" required autocomplete=\"current-password\">\n            </div>\n            <button type=\"submit\" class=\"btn primary\">${t('login')}</button>\n            <div id=\"auth-error\" class=\"hint error\" style=\"display: none;\"></div>\n          </form>\n          <div class=\"auth-footer\" id=\"auth-footer\">\n            <a href=\"#\" id=\"go-to-register\">${t('no_account')}</a>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const form = document.getElementById('login-form') as HTMLFormElement;\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      const username = (document.getElementById('username') as HTMLInputElement).value;\n      const password = (document.getElementById('password') as HTMLInputElement).value;\n      const errorEl = document.getElementById('auth-error') as HTMLElement;\n\n      try {\n        const res = await API.postForm<AuthStatus>('/auth/login', { username, password });\n        this.user = { \n            username: res.username || username, \n            is_admin: res.is_admin === true || (res.is_admin as any) === 1 || (res.is_admin as any) === '1'\n        };\n        if (this.onAuthenticated) this.onAuthenticated();\n      } catch (err: any) {\n        errorEl.textContent = t('auth_error') + ': ' + (err.message || err);\n        errorEl.style.display = 'block';\n      }\n    });\n\n    const regLink = document.getElementById('go-to-register');\n    regLink?.addEventListener('click', async (e) => {\n      e.preventDefault();\n      try {\n        const status = await API.get<AuthStatus>('/auth/status');\n        if (status && status.no_users) {\n            this.renderRegister(true);\n        } else {\n            const footer = document.getElementById('auth-footer');\n            if (footer) {\n                footer.innerHTML = `<span class=\"hint\">${t('registration_closed')}</span>`;\n            }\n        }\n      } catch {\n        this.renderRegister();\n      }\n    });\n  }\n\n  private renderRegister(isFirst: boolean = false) {\n    if (!this.app) return;\n\n    this.app.innerHTML = `\n      <div class=\"auth-page\">\n        <div class=\"auth-card\">\n          <div class=\"auth-header\">\n            <h1>${isFirst ? t('register') + ' (Admin)' : t('register')}</h1>\n          </div>\n          <form id=\"register-form\" class=\"auth-form\">\n            <div class=\"auth-field\">\n              <label for=\"username\">${t('username')}</label>\n              <input type=\"text\" id=\"username\" required autocomplete=\"username\">\n            </div>\n            <div class=\"auth-field\">\n              <label for=\"password\">${t('password_label')}</label>\n              <input type=\"password\" id=\"password\" required autocomplete=\"new-password\">\n            </div>\n            <div class=\"auth-field\">\n              <label for=\"password_confirm\">${t('password_confirm')}</label>\n              <input type=\"password\" id=\"password_confirm\" required autocomplete=\"new-password\">\n            </div>\n            <button type=\"submit\" class=\"btn primary\">${t('register')}</button>\n            <div id=\"auth-error\" class=\"hint error\" style=\"display: none;\"></div>\n          </form>\n          <div class=\"auth-footer\">\n            <a href=\"#\" id=\"go-to-login\">${t('have_account')}</a>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const form = document.getElementById('register-form') as HTMLFormElement;\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      const username = (document.getElementById('username') as HTMLInputElement).value;\n      const password = (document.getElementById('password') as HTMLInputElement).value;\n      const passwordConfirm = (document.getElementById('password_confirm') as HTMLInputElement).value;\n      const errorEl = document.getElementById('auth-error') as HTMLElement;\n\n      if (password !== passwordConfirm) {\n        errorEl.textContent = t('pass_mismatch');\n        errorEl.style.display = 'block';\n        return;\n      }\n\n      try {\n        const res = await API.postForm<AuthStatus>('/auth/register', { username, password });\n        this.user = { \n            username: res.username || username, \n            is_admin: res.is_admin === true || (res.is_admin as any) === 1 || (res.is_admin as any) === '1'\n        };\n        if (this.onAuthenticated) this.onAuthenticated();\n      } catch (err: any) {\n        errorEl.textContent = t('reg_error') + ': ' + (err.message || err);\n        errorEl.style.display = 'block';\n      }\n    });\n\n    const loginLink = document.getElementById('go-to-login');\n    loginLink?.addEventListener('click', (e) => {\n      e.preventDefault();\n      this.renderLogin();\n    });\n  }\n}\n", "import {API, isOffline} from './api';\nimport {t, getLang, setLang, Lang, availableLanguages} from './i18n';\nimport {Auth} from './auth';\n\nconst ICON_EYE = 'M12 5c-5 0-9.27 3.11-11 7 1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7Zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10Zm0-2.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z';\nconst ICON_EYE_OFF = 'M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.82l2.93 2.93C20.88 15.51 22 13.88 22 12c-1.73-3.89-6-7-11-7-1.25 0-2.43.19-3.54.54l2.72 2.72C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.03 1 12c1.73 3.89 6 7 11 7 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z';\n\n// -----------------------------\n// \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0440\u0435\u0436\u0438\u043C\u043E\u0432 \u0430\u0432\u0442\u043E\u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F\n// -----------------------------\ntype AutoFillMode = 'hints' | 'fill';\nconst AF_MODE_KEY = 'autofillMode';\n\nfunction getAutoFillMode(): AutoFillMode {\n    try {\n        const v = localStorage.getItem(AF_MODE_KEY);\n        return (v === 'fill' ? 'fill' : 'hints');\n    } catch {\n        return 'hints';\n    }\n}\n// \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435/\u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0445 \u043F\u0440\u043E\u0444\u0438\u043B\u0435\u0439 \u0434\u043B\u044F \u0444\u043E\u0440\u043C\nconst WIFI_PROFILE_KEY = 'profile_wifi';\nconst ETH_PROFILE_KEY = 'profile_ethernet';\n\nfunction saveLocalProfile(kind: 'wifi' | 'ethernet', data: any) {\n    try {\n        const key = kind === 'wifi' ? WIFI_PROFILE_KEY : ETH_PROFILE_KEY;\n        localStorage.setItem(key, JSON.stringify(data || {}));\n    } catch {}\n}\n\nfunction loadLocalProfile<T = any>(kind: 'wifi' | 'ethernet'): T | undefined {\n    try {\n        const key = kind === 'wifi' ? WIFI_PROFILE_KEY : ETH_PROFILE_KEY;\n        const s = localStorage.getItem(key);\n        if (!s) return undefined;\n        const data = JSON.parse(s);\n        if (data && typeof data === 'object') return data as T;\n    } catch {}\n    return undefined;\n}\n\ntype Section = {\n    id: string;\n    title: string;\n};\n\nconst sections: Section[] = [\n    { id: 'interfaces', title: 'Interfaces' },\n    { id: 'wifi', title: 'WiFi' },\n    { id: 'ethernet', title: 'Ethernet' },\n    { id: 'lora', title: 'LoRA' },\n];\n\nfunction getVisibleSections(): Section[] {\n    const list = [...sections];\n    if (Auth.getInstance().isAdmin()) {\n        list.push({ id: 'users', title: t('users') });\n    }\n    return list;\n}\n\nfunction initUI() {\n    const app = document.getElementById('app');\n    if (!app) return;\n\n    // Create shell\n    const shell = document.createElement('div');\n    shell.className = 'app-shell';\n\n    // Sidebar\n    const sidebar = document.createElement('aside');\n    sidebar.className = 'sidebar';\n\n    const logo = document.createElement('div');\n    logo.className = 'logo';\n    logo.textContent = t('app_title');\n    sidebar.appendChild(logo);\n\n    const langSelect = document.createElement('select');\n    langSelect.className = 'lang-select sidebar-lang';\n    availableLanguages.forEach(opt => {\n        const o = document.createElement('option');\n        o.value = opt.value;\n        o.textContent = opt.label;\n        if (getLang() === opt.value) o.selected = true;\n        langSelect.appendChild(o);\n    });\n    langSelect.addEventListener('change', () => setLang(langSelect.value as Lang));\n    sidebar.appendChild(langSelect);\n\n    const nav = document.createElement('nav');\n    nav.className = 'menu';\n    getVisibleSections().forEach((s, idx) => {\n        const btn = document.createElement('button');\n        btn.className = 'menu-item' + (idx === 0 ? ' active' : '');\n        btn.textContent = t(s.id) || s.title;\n        btn.setAttribute('data-id', s.id);\n        btn.addEventListener('click', () => selectSection(s.id));\n        nav.appendChild(btn);\n    });\n    sidebar.appendChild(nav);\n\n    // Content\n    const content = document.createElement('main');\n    content.className = 'content';\n\n    const header = document.createElement('header');\n    header.className = 'content-header';\n    const h1 = document.createElement('h1');\n    h1.id = 'section-title';\n    header.appendChild(h1);\n\n    const status = document.createElement('div');\n    status.id = 'net-status';\n    status.className = 'status';\n    const ifSaveBtn = document.createElement('button');\n    ifSaveBtn.id = 'if-save-btn';\n    ifSaveBtn.className = 'btn primary';\n    ifSaveBtn.type = 'button';\n    ifSaveBtn.textContent = t('save');\n    ifSaveBtn.disabled = true;\n    ifSaveBtn.style.display = 'none';\n    ifSaveBtn.addEventListener('click', async () => {\n        if (currentSectionId === 'interfaces') {\n            await handleInterfacesSave();\n        } else if (currentSaveAction) {\n            await currentSaveAction();\n        }\n    });\n    header.appendChild(ifSaveBtn);\n\n    // \u041A\u043D\u043E\u043F\u043A\u0438 \u0440\u0430\u0437\u0434\u0435\u043B\u0430 Interfaces (\u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u0441\u043A\u0440\u044B\u0442\u044B)\n    const ifAddBtn = document.createElement('button');\n    ifAddBtn.id = 'if-add-btn';\n    ifAddBtn.className = 'btn';\n    ifAddBtn.type = 'button';\n    ifAddBtn.textContent = t('add');\n    ifAddBtn.style.display = 'none';\n    ifAddBtn.addEventListener('click', () => {\n        handleInterfacesAdd();\n    });\n    header.appendChild(ifAddBtn);\n    const ifDelBtn = document.createElement('button');\n    ifDelBtn.id = 'if-del-btn';\n    ifDelBtn.className = 'btn danger';\n    ifDelBtn.type = 'button';\n    ifDelBtn.textContent = t('delete');\n    ifDelBtn.disabled = true;\n    ifDelBtn.style.display = 'none';\n    ifDelBtn.addEventListener('click', () => {\n        handleInterfacesDelete();\n    });\n    header.appendChild(ifDelBtn);\n    // \u041A\u043D\u043E\u043F\u043A\u0430 \u00AB\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0430\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435\u00BB \u2014 \u043F\u043E\u0434\u0442\u044F\u0433\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0438\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u0441 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\n    const fillBtn = document.createElement('button');\n    fillBtn.id = 'fill-current-btn';\n    fillBtn.className = 'btn';\n    fillBtn.type = 'button';\n    fillBtn.textContent = t('fill_actual');\n    fillBtn.title = t('fill_actual_title');\n    fillBtn.addEventListener('click', async () => {\n        if (!currentSectionId) return;\n        try {\n            // \u0416\u0451\u0441\u0442\u043A\u043E \u0444\u0438\u043A\u0441\u0438\u0440\u0443\u0435\u043C \u0442\u0435\u043A\u0443\u0449\u0438\u0435 \u0448\u0438\u0440\u0438\u043D\u0443/\u0432\u044B\u0441\u043E\u0442\u0443 \u043D\u0430 \u0432\u0440\u0435\u043C\u044F \u0437\u0430\u043F\u0440\u043E\u0441\u0430,\n            // \u0447\u0442\u043E\u0431\u044B \u0438\u0441\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0434\u0430\u0436\u0435 \u0441\u0443\u0431\u043F\u0438\u043A\u0441\u0435\u043B\u044C\u043D\u044B\u0435 \u0441\u043A\u0430\u0447\u043A\u0438 \u043F\u0440\u0438 \u0441\u043C\u0435\u043D\u0435 :disabled\n            const rect = fillBtn.getBoundingClientRect();\n            if (rect.width && rect.height) {\n                fillBtn.style.width = `${Math.round(rect.width)}px`;\n                fillBtn.style.height = `${Math.round(rect.height)}px`;\n            }\n            fillBtn.disabled = true;\n            await refreshCurrentSectionData();\n        } finally {\n            fillBtn.disabled = false;\n            // \u0421\u043D\u0438\u043C\u0430\u0435\u043C \u0444\u0438\u043A\u0441\u0430\u0446\u0438\u044E \u0440\u0430\u0437\u043C\u0435\u0440\u043E\u0432\n            fillBtn.style.width = '';\n            fillBtn.style.height = '';\n        }\n    });\n    header.appendChild(fillBtn);\n    // \u0421\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u0448\u0438\u0440\u0438\u043D\u0443: \u0443\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u043C \u0438 \u043E\u0431\u044B\u0447\u043D\u044B\u0439, \u0438 \u00AB\u0437\u0430\u043D\u044F\u0442\u044B\u0439\u00BB \u0442\u0435\u043A\u0441\u0442\n    stabilizeActionButton(fillBtn, t('updating'));\n\n    // \u041A\u043D\u043E\u043F\u043A\u0430 \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u043E\u0439 \u043E\u0447\u0438\u0441\u0442\u043A\u0438 \u043F\u043E\u043B\u0435\u0439 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0444\u043E\u0440\u043C\u044B\n    const resetBtn = document.createElement('button');\n    resetBtn.id = 'reset-fields-btn';\n    resetBtn.className = 'btn';\n    resetBtn.type = 'button';\n    resetBtn.textContent = t('clear_fields');\n    resetBtn.title = t('clear_form_title');\n    resetBtn.addEventListener('click', () => {\n        clearCurrentFormFields();\n    });\n    header.appendChild(resetBtn);\n    // \u0421\u0442\u0430\u0442\u0443\u0441 \u043F\u043E\u043C\u0435\u0449\u0430\u0435\u043C \u0432 \u043A\u043E\u043D\u0435\u0446, \u0447\u0442\u043E\u0431\u044B \u0435\u0433\u043E \u0448\u0438\u0440\u0438\u043D\u0430 \u043D\u0435 \u0441\u0434\u0432\u0438\u0433\u0430\u043B\u0430 \u043A\u043D\u043E\u043F\u043A\u0438\n    header.appendChild(status);\n    content.appendChild(header);\n\n    const body = document.createElement('section');\n    body.className = 'content-body';\n    body.id = 'content-body';\n    content.appendChild(body);\n\n    shell.appendChild(sidebar);\n    shell.appendChild(content);\n    \n    const toasts = document.createElement('div');\n    toasts.id = 'toast-container';\n    shell.appendChild(toasts);\n\n    app.innerHTML = '';\n    app.appendChild(shell);\n\n    // Default selection\n    selectSection(sections[0].id);\n}\n\nlet currentSectionId: string = sections[0].id;\nlet currentSaveAction: (() => Promise<void>) | null = null;\n\nfunction selectSection(id: string) {\n    // Update active state in menu\n    document.querySelectorAll('.menu-item').forEach((el) => {\n        if (!(el instanceof HTMLButtonElement)) return;\n        el.classList.toggle('active', el.getAttribute('data-id') === id);\n    });\n\n    // Update right panel content\n    const section = getVisibleSections().find((s) => s.id === id) ?? sections[0];\n    const titleEl = document.getElementById('section-title');\n    const bodyEl = document.getElementById('content-body');\n    if (titleEl) titleEl.textContent = section.title;\n    if (bodyEl) {\n        // \u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u0443\u0435\u043C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0432\u044B\u0441\u043E\u0442\u0443, \u0447\u0442\u043E\u0431\u044B \u0438\u0441\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0434\u0451\u0440\u0433\u0430\u043D\u044C\u044F \u043F\u0440\u0438 \u0441\u043C\u0435\u043D\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430\n        const currentH = (bodyEl as HTMLElement).offsetHeight;\n        (bodyEl as HTMLElement).style.minHeight = currentH ? `${currentH}px` : '';\n        (bodyEl as HTMLElement).classList.add('switching');\n        (bodyEl as HTMLElement).scrollTop = 0;\n        // \u041D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u043B\u0438\u0448\u043D\u0435\u0435 \u0441\u043B\u0443\u0436\u0435\u0431\u043D\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0432 \u0442\u0435\u043B\u0435 \u0440\u0430\u0437\u0434\u0435\u043B\u0430, \u0447\u0442\u043E\u0431\u044B \u043D\u0435 \u0434\u0451\u0440\u0433\u0430\u043B\u0441\u044F \u043A\u043E\u043D\u0442\u0435\u043D\u0442\n        // \u041E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439 \u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u0434\u043E \u043F\u0440\u0438\u0445\u043E\u0434\u0430 \u043D\u043E\u0432\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445, \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0432 \u0441\u0442\u0430\u0442\u0443\u0441-\u0431\u0430\u0440\u0435\n    }\n    currentSectionId = id;\n    // \u0414\u043B\u044F \u0440\u0430\u0437\u0434\u0435\u043B\u0430 Interfaces \u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u0433\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u044B\u0435 \u043A\u043D\u043E\u043F\u043A\u0438 \u0448\u0430\u043F\u043A\u0438,\n    // \u043F\u043E\u0441\u043A\u043E\u043B\u044C\u043A\u0443 \u0443 \u043D\u0435\u0433\u043E \u0441\u043E\u0431\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F\n    const fillBtn = document.getElementById('fill-current-btn') as HTMLButtonElement | null;\n    const resetBtn = document.getElementById('reset-fields-btn') as HTMLButtonElement | null;\n    const ifAddBtn = document.getElementById('if-add-btn') as HTMLButtonElement | null;\n    const ifDelBtn = document.getElementById('if-del-btn') as HTMLButtonElement | null;\n    const ifSaveBtn = document.getElementById('if-save-btn') as HTMLButtonElement | null;\n    const isInterfaces = id === 'interfaces';\n    const sectionsWithSave = ['interfaces', 'wifi', 'ethernet', 'lora', 'freedv'];\n    if (fillBtn) fillBtn.style.display = isInterfaces ? 'none' : '';\n    if (resetBtn) resetBtn.style.display = isInterfaces ? 'none' : '';\n    if (ifAddBtn) ifAddBtn.style.display = isInterfaces ? '' : 'none';\n    if (ifDelBtn) ifDelBtn.style.display = isInterfaces ? '' : 'none';\n    if (ifSaveBtn) ifSaveBtn.style.display = sectionsWithSave.includes(id) ? '' : 'none';\n    if (isInterfaces) updateInterfacesHeaderUI();\n    else currentSaveAction = null; // \u0441\u0431\u0440\u043E\u0441 \u0434\u043B\u044F \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0430\u0437\u0434\u0435\u043B\u043E\u0432, \u043E\u043D\u0438 \u0441\u0430\u043C\u0438 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u044F\u0442 \u0435\u0441\u043B\u0438 \u043D\u0430\u0434\u043E\n    updateStatusBar();\n    // \u041F\u0440\u043E\u0431\u0443\u0435\u043C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0440\u0430\u0437\u0434\u0435\u043B\u0430 \u0447\u0435\u0440\u0435\u0437 CGI (GET /cgi-bin/<id>/info)\n    loadSectionData(section.id)\n        .catch(() => {\n            // \u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0436\u0435 \u043E\u0442\u0440\u0430\u0436\u0435\u043D\u0430 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441-\u0431\u0430\u0440\u0435, \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0437\u0430\u0433\u043B\u0443\u0448\u043A\u0443\n            if (bodyEl) {\n                bodyEl.textContent = `${t(section.id)} ${t('section_placeholder')}`;\n            }\n        })\n        .finally(() => {\n            // \u0421\u043D\u0438\u043C\u0430\u0435\u043C \u0444\u0438\u043A\u0441\u0430\u0446\u0438\u044E \u0432\u044B\u0441\u043E\u0442\u044B \u0438 \u044D\u0444\u0444\u0435\u043A\u0442 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F\n            if (bodyEl) {\n                (bodyEl as HTMLElement).classList.remove('switching');\n                (bodyEl as HTMLElement).style.minHeight = '';\n            }\n        });\n}\n\nasync function loadSectionData(id: string) {\n    const bodyEl = document.getElementById('content-body');\n    try {\n        // \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043D\u0430 \u0432\u0440\u0435\u043C\u044F \u0437\u0430\u043F\u0440\u043E\u0441\u0430\n        setStatus('busy', '');\n        const data = await API.get(`/${id}/info`);\n        if (bodyEl) {\n            // \u0421\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u044B \u0434\u043B\u044F WiFi/Ethernet/FreeDV, \u043E\u0441\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u2014 \u0441\u044B\u0440\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435\n            if (id === 'wifi') {\n                renderWifiForm(parseInfoForSection(id, data) as any);\n            } else if (id === 'ethernet') {\n                renderEthernetForm(parseInfoForSection(id, data) as any);\n            } else if (id === 'lora') {\n                renderLoRAForm(parseInfoForSection(id, data) as any);\n            } else if (id === 'freedv') {\n                renderFreeDVForm(parseInfoForSection(id, data) as any);\n            } else if (id === 'rnsd') {\n                renderRnsdConfig(data);\n            } else if (id === 'interfaces') {\n                const raw = unwrapDataPayload(data);\n                let list: InterfaceItem[] = [];\n                if (Array.isArray(raw)) {\n                    list = raw as InterfaceItem[];\n                } else if (typeof raw === 'string') {\n                    try {\n                        const j = JSON.parse(raw);\n                        if (Array.isArray(j)) list = j;\n                    } catch {}\n                }\n                if (list.length > 0) {\n                    ifSaveAll(list);\n                    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C baseline\n                    interfacesBaselineJSON = JSON.stringify(list);\n                    localStorage.setItem(IF_BASELINE_KEY, interfacesBaselineJSON);\n                }\n                renderInterfacesForm();\n            } else if (id === 'users') {\n                renderUsersForm(data as any);\n            } else {\n                const pre = document.createElement('pre');\n                pre.className = 'code';\n                pre.textContent = typeof data === 'string' ? data : JSON.stringify(data, null, 2);\n                bodyEl.innerHTML = '';\n                bodyEl.appendChild(pre);\n            }\n        }\n        // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0442\u043E\u043B\u044C\u043A\u043E \u0438\u043A\u043E\u043D\u043A\u0443 \u00AB\u043E\u043D\u043B\u0430\u0439\u043D\u00BB, \u0431\u0435\u0437 \u0442\u0435\u043A\u0441\u0442\u0430\n        setStatus('ok', '');\n    } catch (e: any) {\n        // \u0412 \u043E\u0444\u0444\u043B\u0430\u0439\u043D-\u0440\u0435\u0436\u0438\u043C\u0435 \u0438\u043B\u0438 \u043E\u0448\u0438\u0431\u043A\u0435 \u0441\u0435\u0442\u0438 \u2014 \u0444\u043E\u0440\u043C\u044B \u0434\u043B\u044F wifi/ethernet \u0440\u0435\u043D\u0434\u0435\u0440\u0438\u043C \u0441 \u0434\u0435\u0444\u043E\u043B\u0442\u0430\u043C\u0438,\n        // \u0434\u043B\u044F \u043F\u0440\u043E\u0447\u0438\u0445 \u0440\u0430\u0437\u0434\u0435\u043B\u043E\u0432 \u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C \u043F\u0440\u0435\u0436\u043D\u0435\u0435 \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435 (\u043E\u0448\u0438\u0431\u043A\u0430 \u0438 \u0437\u0430\u0433\u043B\u0443\u0448\u043A\u0430 \u0441\u0432\u0435\u0440\u0445\u0443).\n        if (id === 'wifi') {\n            if (bodyEl) renderWifiForm(undefined);\n            if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n            else setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            return; // \u043D\u0435 \u043F\u0440\u043E\u0431\u0440\u0430\u0441\u044B\u0432\u0430\u0435\u043C, \u0447\u0442\u043E\u0431\u044B \u043D\u0435 \u043F\u0435\u0440\u0435\u0442\u0451\u0440\u043B\u043E\u0441\u044C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435\n        } else if (id === 'ethernet') {\n            if (bodyEl) renderEthernetForm(undefined);\n            if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n            else setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            return;\n        } else if (id === 'lora') {\n            if (bodyEl) renderLoRAForm(undefined);\n            if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n            else setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            return;\n        } else if (id === 'freedv') {\n            if (bodyEl) renderFreeDVForm(undefined);\n            if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n            else setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            return;\n        } else if (id === 'rnsd') {\n            if (bodyEl) renderRnsdConfig(undefined);\n            if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n            else setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            return;\n        } else if (id === 'interfaces') {\n            if (bodyEl) renderInterfacesForm();\n            if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n            else setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            return;\n        } else {\n            if (isOffline()) {\n                setStatus('offline', t('offline_cgi_unavailable'));\n            } else {\n                setStatus('error', `${t('load_error')}: ${e?.message || e}`);\n            }\n            throw e;\n        }\n    }\n}\n\nfunction updateStatusBar() {\n    if (isOffline()) setStatus('offline', t('offline_cgi_unavailable'));\n    else setStatus('ok', '');\n}\n\n// -----------------------------\n// \u0420\u0430\u0437\u0434\u0435\u043B: Interfaces \u2014 \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u0430\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F\n// -----------------------------\ntype InterfaceType = 'autointerface' | 'tcp_client' | 'tcp_server' | 'rnode' | 'freedv' | 'loraspi';\ntype InterfaceItem = {\n    id: string;\n    name: string;\n    type: InterfaceType;\n    settings: Record<string, any>;\n};\n\ntype FieldDef = {\n    key: string;\n    label: string;\n    type: 'text' | 'number' | 'select';\n    default: any;\n    options?: string[];\n    min?: number;\n    max?: number;\n    datalist?: string[];\n};\n\ntype TypeDef = {\n    value: InterfaceType;\n    label: string;\n    fields: FieldDef[];\n};\n\nconst IF_STORAGE_KEY = 'interfaces_config';\nconst IF_CUR_KEY = 'interfaces_current_id';\nconst IF_BASELINE_KEY = 'interfaces_saved_baseline'; // \u0441\u043D\u0438\u043C\u043E\u043A \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043D\u0430 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E\nlet interfacesBaselineJSON: string | null = null; // \u043A\u044D\u0448 baseline \u0437\u0430 \u0441\u0435\u0441\u0441\u0438\u044E\n\nconst RN_PRESETS: Record<string, { bw: number, sf: number, cr: number }> = {\n    'Short Turbo (21.88 kbps, 140dB)': { bw: 500, sf: 7, cr: 5 },\n    'Short Fast (10.94 kbps, 143dB)': { bw: 250, sf: 7, cr: 5 },\n    'Short Slow (6.25 kbps, 145.5dB)': { bw: 250, sf: 8, cr: 5 },\n    'Medium Fast (3.52 kbps, 148dB)': { bw: 250, sf: 9, cr: 5 },\n    'Medium Slow (1.95 kbps, 150.5dB)': { bw: 250, sf: 10, cr: 5 },\n    'Long Turbo (1.34 kbps, 150dB)': { bw: 500, sf: 11, cr: 8 },\n    'Long Fast (1.07 kbps, 153dB)': { bw: 250, sf: 11, cr: 5 },\n    'Long Moderate (0.34 kbps, 156dB)': { bw: 125, sf: 11, cr: 8 },\n    'Long Slow (0.18 kbps, 158.5dB)': { bw: 125, sf: 12, cr: 8 },\n};\n\nconst INTERFACE_TYPES: TypeDef[] = [\n    {\n        value: 'autointerface',\n        label: t('label_autointerface'),\n        fields: [\n        ],\n    },\n    {\n        value: 'tcp_client',\n        label: t('label_tcp_client'),\n        fields: [\n            { key: 'host', label: t('label_host'), type: 'text', default: '' },\n            { key: 'port', label: t('label_port'), type: 'number', default: 5000 },\n        ],\n    },\n    {\n        value: 'tcp_server',\n        label: t('label_tcp_server'),\n        fields: [\n            { key: 'bind_host', label: t('label_bind_host'), type: 'text', default: '0.0.0.0' },\n            { key: 'port', label: t('label_port'), type: 'number', default: 5000 },\n        ],\n    },\n    {\n        value: 'rnode',\n        label: t('label_rnode'),\n        fields: [\n            { key: 'serial', label: t('label_serial_port'), type: 'text', default: '/dev/ttyUSB0' },\n            { key: 'tx_power', label: t('label_tx_power'), type: 'number', default: 20 },\n            { key: 'preset', label: t('label_radio_preset'), type: 'select', default: t('not_selected'), options: [t('not_selected'), ...Object.keys(RN_PRESETS)] },\n            { key: 'frequency', label: t('label_frequency'), type: 'number', default: 868 },\n            {\n                key: 'bandwidth',\n                label: t('label_bandwidth'),\n                type: 'select',\n                default: 125,\n                options: ['7.8', '10.4', '15.6', '20.8', '31.25', '41.7', '62.5', '125', '250', '500', '1625']\n            },\n            { key: 'coding_rate', label: t('label_coding_rate'), type: 'select', default: 5, options: ['5', '6', '7', '8'] },\n            { key: 'spread_factor', label: t('label_spread_factor'), type: 'select', default: 7, options: ['5', '6', '7', '8', '9', '10', '11', '12'] },\n        ],\n    },\n    {\n        value: 'freedv',\n        label: t('label_freedv'),\n        fields: [\n            { key: 'mode', label: t('label_mode'), type: 'select', default: 'FSK2', options: ['FSK2', 'FSK4'] },\n            { key: 'rate', label: t('label_rate'), type: 'select', default: '500', options: ['500','200','100','50','20'] },\n            { key: 'ldpc', label: t('label_ldpc'), type: 'select', default: '768/256', options: ['768/256','512/256'] },\n        ],\n    },\n    {\n        value: 'loraspi',\n        label: t('label_loraspi'),\n        fields: [\n            { key: 'spi_chip', label: t('label_spi_chip'), type: 'text', default: 'spi0' },\n            { key: 'spi_pin', label: t('label_spi_pin'), type: 'number', default: 0 },\n\n            { key: 'irq_chip', label: t('label_irq_chip'), type: 'text', default: 'gpiochip1' },\n            { key: 'irq_pin', label: t('label_irq_pin'), type: 'text', default: '' },\n\n            { key: 'busy_chip', label: t('label_busy_chip'), type: 'text', default: 'gpiochip1' },\n            { key: 'busy_pin', label: t('label_busy_pin'), type: 'text', default: '' },\n\n            { key: 'nrst_chip', label: t('label_nrst_chip'), type: 'text', default: 'gpiochip1' },\n            { key: 'nrst_pin', label: t('label_nrst_pin'), type: 'text', default: '' },\n\n            { key: 'txen_chip', label: t('label_tx_en_chip'), type: 'text', default: 'gpiochip1' },\n            { key: 'txen_pin', label: t('label_tx_en_pin'), type: 'text', default: '' },\n\n            { key: 'rxen_chip', label: t('label_rx_en_chip'), type: 'text', default: 'gpiochip1' },\n            { key: 'rxen_pin', label: t('label_rx_en_pin'), type: 'text', default: '' },\n\n            { key: 'tx_power', label: t('label_tx_power'), type: 'number', default: 20 },\n            { key: 'preset', label: t('label_radio_preset'), type: 'select', default: t('not_selected'), options: [t('not_selected'), ...Object.keys(RN_PRESETS)] },\n            { key: 'frequency', label: t('label_frequency'), type: 'number', default: 868 },\n            {\n                key: 'bandwidth',\n                label: t('label_bandwidth'),\n                type: 'select',\n                default: 125,\n                options: ['7.8', '10.4', '15.6', '20.8', '31.25', '41.7', '62.5', '125', '250', '500', '1625']\n            },\n            { key: 'coding_rate', label: t('label_coding_rate'), type: 'select', default: 5, options: ['5', '6', '7', '8'] },\n            { key: 'spread_factor', label: t('label_spread_factor'), type: 'select', default: 7, options: ['5', '6', '7', '8', '9', '10', '11', '12'] },\n        ]\n    },\n];\n\nfunction ifLoadAll(): InterfaceItem[] {\n    try {\n        const s = localStorage.getItem(IF_STORAGE_KEY);\n        if (!s) return [];\n        const arr = JSON.parse(s);\n        if (Array.isArray(arr)) return arr as InterfaceItem[];\n    } catch {}\n    return [];\n}\n\nfunction ifSaveAll(list: InterfaceItem[]) {\n    try {\n        localStorage.setItem(IF_STORAGE_KEY, JSON.stringify(list));\n    } catch {}\n}\n\nfunction ifGetCurrentId(): string | null {\n    try {\n        return localStorage.getItem(IF_CUR_KEY);\n    } catch { return null; }\n}\n\nfunction ifSetCurrentId(id: string | null) {\n    try {\n        if (id) localStorage.setItem(IF_CUR_KEY, id);\n        else localStorage.removeItem(IF_CUR_KEY);\n    } catch {}\n}\n\nfunction typeDefByValue(v: InterfaceType): TypeDef {\n    return INTERFACE_TYPES.find(t => t.value === v) || INTERFACE_TYPES[0];\n}\n\nfunction typeLabel(v: InterfaceType): string {\n    return typeDefByValue(v).label;\n}\n\nfunction buildDefaultsForType(t: InterfaceType): Record<string, any> {\n    const def = typeDefByValue(t);\n    const out: Record<string, any> = {};\n    def.fields.forEach(f => out[f.key] = f.default);\n    return out;\n}\n\nfunction nextInterfaceName(list: InterfaceItem[]): string {\n    const base = 'iface';\n    let n = 1;\n    while (list.some(i => i.name === `${base}-${n}`)) n++;\n    return `${base}-${n}`;\n}\n\nfunction renderInterfacesForm() {\n    const body = byId<HTMLElement>('content-body');\n    const list = ifLoadAll();\n\n    // \u0421\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0438\u0440\u0443\u0435\u043C baseline \u043F\u0440\u0438 \u043F\u0435\u0440\u0432\u043E\u043C \u0440\u0435\u043D\u0434\u0435\u0440\u0435, \u0435\u0441\u043B\u0438 \u043E\u043D \u0435\u0449\u0435 \u043D\u0435 \u0437\u0430\u0434\u0430\u043D\n    if (interfacesBaselineJSON === null) {\n        interfacesBaselineJSON = localStorage.getItem(IF_BASELINE_KEY);\n        // \u0415\u0441\u043B\u0438 \u0438 \u0432 localStorage \u043D\u0435\u0442 \u2014 \u0437\u043D\u0430\u0447\u0438\u0442 \u044D\u0442\u043E \u0441\u0430\u043C\u044B\u0439 \u043F\u0435\u0440\u0432\u044B\u0439 \u0437\u0430\u043F\u0443\u0441\u043A,\n        // \u0441\u0447\u0438\u0442\u0430\u0435\u043C \u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0437\u0430 baseline (\u0438\u043B\u0438 \u043F\u0443\u0441\u0442\u043E\u0442\u0443)\n        if (interfacesBaselineJSON === null) {\n            interfacesBaselineJSON = JSON.stringify(list);\n            try { localStorage.setItem(IF_BASELINE_KEY, interfacesBaselineJSON); } catch {}\n        }\n    }\n\n    let curId = ifGetCurrentId();\n    if (!curId && list.length) {\n        curId = list[0].id;\n        ifSetCurrentId(curId);\n    }\n    const cur = list.find(i => i.id === curId) || null;\n\n    body.innerHTML = '';\n\n    // \u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E\u0441\u0442\u044C \u043A\u043D\u043E\u043F\u043E\u043A \u0432 \u0448\u0430\u043F\u043A\u0435\n    updateInterfacesHeaderUI();\n\n    const form = document.createElement('div');\n    form.className = 'form';\n\n    if (!list.length) {\n        const empty = document.createElement('div');\n        empty.className = 'form-section';\n        empty.innerHTML = `<div class=\"form-title\">${t('interfaces')}</div><div>${t('no_interfaces_added')}</div>`;\n        form.appendChild(empty);\n        body.appendChild(form);\n        return;\n    }\n\n    // \u0421\u0435\u043A\u0446\u0438\u044F \u0441\u043E \u0441\u043F\u0438\u0441\u043A\u043E\u043C \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043E\u0432\n    const secList = document.createElement('div');\n    secList.className = 'form-section';\n    secList.innerHTML = `<div class=\"form-title\">${t('interfaces_list')}</div>`;\n    const gridList = document.createElement('div');\n    gridList.className = 'form-grid';\n    const labSel = document.createElement('label');\n    labSel.setAttribute('for', 'if-select');\n    labSel.textContent = t('interface');\n    const sel = document.createElement('select');\n    sel.id = 'if-select';\n    list.forEach((it) => {\n        const opt = document.createElement('option');\n        opt.value = it.id;\n        opt.textContent = `${it.name || `(${t('no_name')})`} \u2014 ${typeLabel(it.type)}`;\n        if (it.id === curId) opt.selected = true;\n        sel.appendChild(opt);\n    });\n    sel.addEventListener('change', () => {\n        ifSetCurrentId(sel.value);\n        renderInterfacesForm();\n    });\n    gridList.appendChild(labSel);\n    gridList.appendChild(sel);\n    secList.appendChild(gridList);\n    form.appendChild(secList);\n\n    if (!cur) {\n        body.appendChild(form);\n        return;\n    }\n\n    // \u041F\u043E\u043B\u0435 \u0438\u043C\u0435\u043D\u0438\n    const secName = document.createElement('div');\n    secName.className = 'form-section';\n    const gridName = document.createElement('div');\n    gridName.className = 'form-grid';\n    const labName = document.createElement('label');\n    labName.setAttribute('for', 'if-name');\n    labName.textContent = t('interface_name');\n    const inputName = document.createElement('input');\n    inputName.id = 'if-name';\n    inputName.type = 'text';\n    inputName.value = cur.name;\n    inputName.addEventListener('input', () => {\n        const arr = ifLoadAll();\n        const item = arr.find(i => i.id === cur.id);\n        if (!item) return;\n        item.name = inputName.value;\n        ifSaveAll(arr);\n        // \u041E\u0431\u043D\u043E\u0432\u0438\u043C \u0442\u0435\u043A\u0441\u0442 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u043E\u043F\u0446\u0438\u0438 \u0431\u0435\u0437 \u043F\u043E\u043B\u043D\u043E\u0433\u043E \u043F\u0435\u0440\u0435\u0440\u0435\u043D\u0434\u0435\u0440\u0430\n        // \u041E\u0431\u043D\u043E\u0432\u0438\u043C option \u0432 \u0441\u0435\u043B\u0435\u043A\u0442\u0435\n        for (const o of Array.from(sel.options)) {\n            if (o.value === cur.id) {\n                o.textContent = `${item.name || `(${t('no_name')})`} \u2014 ${typeLabel(item.type)}`;\n                break;\n            }\n        }\n        updateInterfacesHeaderUI();\n    });\n    gridName.appendChild(labName);\n    gridName.appendChild(inputName);\n    secName.appendChild(gridName);\n    form.appendChild(secName);\n\n    // \u0412\u044B\u0431\u043E\u0440 \u0442\u0438\u043F\u0430\n    const secType = document.createElement('div');\n    secType.className = 'form-section';\n    const gridType = document.createElement('div');\n    gridType.className = 'form-grid';\n    const labType = document.createElement('label');\n    labType.setAttribute('for', 'if-type');\n    labType.textContent = t('type');\n    const selType = document.createElement('select');\n    selType.id = 'if-type';\n    INTERFACE_TYPES.forEach(t => {\n        const opt = document.createElement('option');\n        opt.value = t.value;\n        opt.textContent = t.label;\n        if (t.value === cur.type) opt.selected = true;\n        selType.appendChild(opt);\n    });\n    selType.addEventListener('change', () => {\n        const arr = ifLoadAll();\n        const item = arr.find(i => i.id === cur.id);\n        if (!item) return;\n        item.type = selType.value as InterfaceType;\n        item.settings = buildDefaultsForType(item.type);\n        ifSaveAll(arr);\n        // \u041E\u0431\u043D\u043E\u0432\u0438\u043C \u0442\u0435\u043A\u0441\u0442 \u043E\u043F\u0446\u0438\u0438 \u0432 \u0441\u043F\u0438\u0441\u043A\u0435 \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043E\u0432\n        for (const o of Array.from(sel.options)) {\n            if (o.value === cur.id) {\n                o.textContent = `${item.name || `(${t('no_name')})`} \u2014 ${typeLabel(item.type)}`;\n                break;\n            }\n        }\n        // \u041F\u0435\u0440\u0435\u0440\u0438\u0441\u0443\u0435\u043C \u043D\u0430\u0431\u043E\u0440 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A\n        renderSettings(cur.id);\n        updateInterfacesHeaderUI();\n    });\n    gridType.appendChild(labType);\n    gridType.appendChild(selType);\n    secType.appendChild(gridType);\n    form.appendChild(secType);\n\n    // \u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0434\u043B\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A\n    const secSet = document.createElement('div');\n    secSet.className = 'form-section';\n    const titleSet = document.createElement('div');\n    titleSet.className = 'form-title';\n    titleSet.textContent = t('type_settings');\n    const contSet = document.createElement('div');\n    contSet.id = 'if-settings';\n    secSet.appendChild(titleSet);\n    secSet.appendChild(contSet);\n    form.appendChild(secSet);\n\n    // \u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0443 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u0438 \u043E\u0442\u0440\u0435\u043D\u0434\u0435\u0440\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438\n    body.appendChild(form);\n    renderSettings(cur.id);\n\n    function renderSettings(itemId: string) {\n        const container = byId<HTMLDivElement>('if-settings');\n        if (!container) return;\n        const arr = ifLoadAll();\n        const item = arr.find(i => i.id === itemId);\n        if (!item) { container.innerHTML = ''; return; }\n        const tdef = typeDefByValue(item.type);\n        container.innerHTML = '';\n\n        // \u041E\u0441\u043E\u0431\u0430\u044F \u043E\u0442\u0440\u0438\u0441\u043E\u0432\u043A\u0430 \u0434\u043B\u044F LoraSPI \u2014 \u0442\u0430\u0431\u043B\u0438\u0447\u043D\u0430\u044F \u0440\u0430\u0441\u043A\u043B\u0430\u0434\u043A\u0430 Chip/Pin \u043F\u043E \u0441\u0438\u0433\u043D\u0430\u043B\u0430\u043C\n        if (tdef.value === 'loraspi') {\n            // \u0423\u0434\u043E\u0431\u043D\u044B\u0439 \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u0434\u0435\u0444\u043E\u043B\u0442\u0430\u043C\n            const defaults: Record<string, any> = {};\n            tdef.fields.forEach(f => { defaults[f.key] = f.default; });\n\n            const table = document.createElement('div');\n            table.className = 'gpio-table';\n\n            // \u0428\u0430\u043F\u043A\u0430 \u0442\u0430\u0431\u043B\u0438\u0446\u044B: \u00AB\u0421\u0438\u0433\u043D\u0430\u043B | Chip | Pin\u00BB\n            const hTitle = document.createElement('div');\n            hTitle.className = 'gpio-header';\n            const hChip = document.createElement('div');\n            hChip.className = 'gpio-header';\n            hChip.textContent = 'Chip';\n            const hPin = document.createElement('div');\n            hPin.className = 'gpio-header';\n            hPin.textContent = 'Pin';\n            table.appendChild(hTitle);\n            table.appendChild(hChip);\n            table.appendChild(hPin);\n\n            type Row = { title: string; chipKey: string; pinKey: string; pinType: 'text' | 'number' };\n            const rows: Row[] = [\n                { title: 'SPI',  chipKey: 'spi_chip',  pinKey: 'spi_pin',  pinType: 'number' },\n                { title: 'IRQ',  chipKey: 'irq_chip',  pinKey: 'irq_pin',  pinType: 'text'   },\n                { title: 'Busy', chipKey: 'busy_chip', pinKey: 'busy_pin', pinType: 'text'   },\n                { title: 'NRST', chipKey: 'nrst_chip', pinKey: 'nrst_pin', pinType: 'text'   },\n                { title: 'TX EN',chipKey: 'txen_chip', pinKey: 'txen_pin', pinType: 'text'   },\n                { title: 'RX EN',chipKey: 'rxen_chip', pinKey: 'rxen_pin', pinType: 'text'   },\n            ];\n\n            const applySave = (key: string, value: any) => {\n                const a = ifLoadAll();\n                const it = a.find(i => i.id === itemId);\n                if (!it) return;\n                it.settings[key] = value;\n                ifSaveAll(a);\n                updateInterfacesHeaderUI();\n            };\n\n            rows.forEach(r => {\n                // Title cell\n                const title = document.createElement('div');\n                title.className = 'gpio-row-title';\n                title.textContent = r.title;\n                table.appendChild(title);\n\n                // Chip input\n                const chipInp = document.createElement('input');\n                chipInp.id = `if-field-${r.chipKey}`;\n                chipInp.type = 'text';\n                const chipDefault = defaults[r.chipKey];\n                const chipStored = item.settings[r.chipKey];\n                chipInp.placeholder = chipDefault === undefined || chipDefault === null ? '' : String(chipDefault);\n                // \u041F\u0443\u0441\u0442\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 \u0438\u043D\u043F\u0443\u0442\u0435, \u0435\u0441\u043B\u0438 \u0445\u0440\u0430\u043D\u0438\u0442\u0441\u044F \u0434\u0435\u0444\u043E\u043B\u0442 \u0438\u043B\u0438 \u043F\u0443\u0441\u0442\u043E \u2014 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u043F\u043B\u0435\u0439\u0441\u0445\u043E\u043B\u0434\u0435\u0440\n                if (chipStored === undefined || chipStored === null || String(chipStored) === String(chipDefault ?? '')) {\n                    chipInp.value = '';\n                } else {\n                    chipInp.value = String(chipStored);\n                }\n                chipInp.addEventListener('input', () => {\n                    applySave(r.chipKey, chipInp.value);\n                });\n                table.appendChild(chipInp);\n\n                // Pin input\n                const pinInp = document.createElement('input');\n                pinInp.id = `if-field-${r.pinKey}`;\n                pinInp.type = r.pinType === 'number' ? 'number' : 'text';\n                const pinDefault = defaults[r.pinKey];\n                const pinStored = item.settings[r.pinKey];\n                // \u0414\u043B\u044F \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u0445 \u043F\u0438\u043D\u043E\u0432 (IRQ/Busy/NRST/TX EN/RX EN) \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u044F\u0432\u043D\u044B\u0439 \u043F\u043B\u0435\u0439\u0441\u0445\u043E\u043B\u0434\u0435\u0440\n                // \u00AB\u043D\u043E\u043C\u0435\u0440 \u0438\u043B\u0438 \u0438\u043C\u044F\u00BB, \u0434\u0430\u0436\u0435 \u0435\u0441\u043B\u0438 \u0434\u0435\u0444\u043E\u043B\u0442\u0430 \u043D\u0435\u0442. \u0414\u043B\u044F \u0447\u0438\u0441\u043B\u043E\u0432\u044B\u0445 \u2014 \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043F\u0440\u0435\u0436\u043D\u044E\u044E \u043B\u043E\u0433\u0438\u043A\u0443.\n                pinInp.placeholder = r.pinType === 'text'\n                    ? t('num_or_name')\n                    : (pinDefault === undefined || pinDefault === null ? '' : String(pinDefault));\n                if (\n                    pinStored === undefined || pinStored === null ||\n                    // \u0414\u043B\u044F \u0447\u0438\u0441\u043B\u043E\u0432\u044B\u0445 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0439 \u0441\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u0435\u043C \u043F\u043E \u0441\u0442\u0440\u043E\u043A\u0435 \u2014 \u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u043B\u044F \u0440\u0435\u043D\u0434\u0435\u0440\u0430\n                    String(pinStored) === String(pinDefault ?? '')\n                ) {\n                    pinInp.value = '';\n                } else {\n                    pinInp.value = String(pinStored);\n                }\n                pinInp.addEventListener('input', () => {\n                    if (r.pinType === 'number') {\n                        const n = pinInp.value.trim() === '' ? null : Number(pinInp.value);\n                        applySave(r.pinKey, Number.isFinite(n as any) ? Number(n) : null);\n                    } else {\n                        applySave(r.pinKey, pinInp.value);\n                    }\n                });\n                table.appendChild(pinInp);\n            });\n\n            container.appendChild(table);\n\n            // \u041E\u0442\u0440\u0438\u0441\u043E\u0432\u044B\u0432\u0430\u0435\u043C \u043E\u0441\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F (\u0440\u0430\u0434\u0438\u043E-\u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B), \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u043D\u0435 \u0432\u043E\u0448\u043B\u0438 \u0432 \u0442\u0430\u0431\u043B\u0438\u0446\u0443\n            const tableKeys = new Set<string>();\n            rows.forEach(r => { tableKeys.add(r.chipKey); tableKeys.add(r.pinKey); });\n\n            const remainingFields = tdef.fields.filter(f => !tableKeys.has(f.key));\n            if (remainingFields.length > 0) {\n                const grid = document.createElement('div');\n                grid.className = 'form-grid';\n                grid.style.marginTop = '20px';\n                container.appendChild(grid);\n                remainingFields.forEach(f => renderField(f, grid, item, itemId));\n            }\n            return;\n        }\n\n        // \u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u0430\u044F \u0440\u0430\u0441\u043A\u043B\u0430\u0434\u043A\u0430 \u0434\u043B\u044F \u043F\u0440\u043E\u0447\u0438\u0445 \u0442\u0438\u043F\u043E\u0432\n        const grid = document.createElement('div');\n        grid.className = 'form-grid';\n        container.appendChild(grid);\n        tdef.fields.forEach((f) => {\n            renderField(f, grid, item, itemId);\n        });\n    }\n\n    function renderField(f: any, grid: HTMLElement, item: InterfaceItem, itemId: string) {\n        const lab = document.createElement('label');\n        lab.setAttribute('for', `if-field-${f.key}`);\n        lab.textContent = f.label;\n        let input: HTMLElement;\n        if (f.type === 'select') {\n            const sel = document.createElement('select');\n            sel.id = `if-field-${f.key}`;\n            (f.options || []).forEach((optv: any) => {\n                const o = document.createElement('option');\n                o.value = String(optv);\n                o.textContent = String(optv);\n                sel.appendChild(o);\n            });\n            sel.value = String(item.settings[f.key] ?? f.default);\n            sel.addEventListener('change', () => {\n                const a = ifLoadAll();\n                const it = a.find(i => i.id === itemId);\n                if (!it) return;\n                it.settings[f.key] = sel.value;\n\n                // \u0415\u0441\u043B\u0438 \u044D\u0442\u043E \u043F\u0440\u0435\u0441\u0435\u0442 RNode \u0438\u043B\u0438 LoraSPI \u2014 \u043F\u043E\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C BW/CR/SF\n                if ((item.type === 'rnode' || item.type === 'loraspi') && f.key === 'preset' && RN_PRESETS[sel.value]) {\n                    const p = RN_PRESETS[sel.value];\n                    it.settings['bandwidth'] = p.bw;\n                    it.settings['coding_rate'] = p.cr;\n                    it.settings['spread_factor'] = p.sf;\n\n                    const bwInp = byId<HTMLSelectElement>('if-field-bandwidth');\n                    const crInp = byId<HTMLSelectElement>('if-field-coding_rate');\n                    const sfInp = byId<HTMLSelectElement>('if-field-spread_factor');\n                    if (bwInp) bwInp.value = String(p.bw);\n                    if (crInp) crInp.value = String(p.cr);\n                    if (sfInp) sfInp.value = String(p.sf);\n                }\n\n                ifSaveAll(a);\n                updateInterfacesHeaderUI();\n            });\n            input = sel;\n        } else {\n            const inp = document.createElement('input');\n            inp.id = `if-field-${f.key}`;\n            inp.type = f.type === 'number' ? 'number' : 'text';\n            if (f.type === 'number') inp.step = 'any';\n            if (f.min !== undefined) inp.setAttribute('min', String(f.min));\n            if (f.max !== undefined) inp.setAttribute('max', String(f.max));\n            if (f.datalist) attachDatalist(inp, f.datalist, f.key);\n\n            const v = item.settings[f.key] ?? f.default;\n            inp.value = v === undefined || v === null ? '' : String(v);\n            inp.addEventListener('input', () => {\n                const a = ifLoadAll();\n                const it = a.find(i => i.id === itemId);\n                if (!it) return;\n                if (f.type === 'number') {\n                    const n = inp.value.trim() === '' ? null : Number(inp.value);\n                    it.settings[f.key] = Number.isFinite(n as any) ? Number(n) : null;\n                } else {\n                    it.settings[f.key] = inp.value;\n                }\n\n                // \u0415\u0441\u043B\u0438 \u0432\u0440\u0443\u0447\u043D\u0443\u044E \u043C\u0435\u043D\u044F\u0435\u043C \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0440\u0430\u0434\u0438\u043E \u2014 \u0441\u0431\u0440\u0430\u0441\u044B\u0432\u0430\u0435\u043C \u043F\u0440\u0435\u0441\u0435\u0442\n                if ((item.type === 'rnode' || item.type === 'loraspi') && ['bandwidth', 'coding_rate', 'spread_factor'].includes(f.key)) {\n                    if (it.settings['preset'] !== undefined) {\n                        it.settings['preset'] = t('not_selected');\n                        const preSel = byId<HTMLSelectElement>('if-field-preset');\n                        if (preSel) preSel.value = t('not_selected');\n                    }\n                }\n\n                ifSaveAll(a);\n                updateInterfacesHeaderUI();\n            });\n            input = inp;\n        }\n        grid.appendChild(lab);\n        grid.appendChild(input);\n    }\n}\n\nfunction updateInterfacesHeaderUI() {\n    const addBtn = byId<HTMLButtonElement>('if-add-btn');\n    const delBtn = byId<HTMLButtonElement>('if-del-btn');\n    const saveBtn = byId<HTMLButtonElement>('if-save-btn');\n    const list = ifLoadAll();\n    const curId = ifGetCurrentId();\n    const hasCur = !!curId && list.some(i => i.id === curId);\n\n    if (addBtn) {\n        const isAdmin = Auth.getInstance().isAdmin();\n        if (!isAdmin && list.length >= 1) {\n            addBtn.disabled = true;\n            addBtn.title = t('limit_one_config');\n        } else {\n            addBtn.disabled = false;\n            addBtn.title = '';\n        }\n    }\n\n    if (delBtn) delBtn.disabled = !hasCur;\n    if (saveBtn) {\n        // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C baseline \u0438\u0437 localStorage \u0438\u043B\u0438 \u0442\u0435\u043A\u0443\u0449\u0438\u043C \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435\u043C (\u0435\u0441\u043B\u0438 \u043D\u0435\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0439)\n        if (!interfacesBaselineJSON) {\n            try {\n                interfacesBaselineJSON = localStorage.getItem(IF_BASELINE_KEY);\n            } catch {}\n            if (!interfacesBaselineJSON) interfacesBaselineJSON = JSON.stringify(list);\n        }\n        const curJSON = JSON.stringify(list);\n        const hasDiff = curJSON !== interfacesBaselineJSON;\n        saveBtn.disabled = isOffline() || list.length === 0 || !hasDiff;\n    }\n}\n\nfunction handleInterfacesAdd() {\n    const list = ifLoadAll();\n    const id = `if-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`;\n    const type: InterfaceType = 'tcp_client';\n    const item: InterfaceItem = {\n        id,\n        name: nextInterfaceName(list),\n        type,\n        settings: buildDefaultsForType(type),\n    };\n    list.push(item);\n    ifSaveAll(list);\n    ifSetCurrentId(id);\n    updateInterfacesHeaderUI();\n    renderInterfacesForm();\n}\n\nfunction handleInterfacesDelete() {\n    const list = ifLoadAll();\n    const curId = ifGetCurrentId();\n    if (!curId) return;\n    const idx = list.findIndex(i => i.id === curId);\n    if (idx === -1) return;\n    list.splice(idx, 1);\n    ifSaveAll(list);\n    if (list.length) {\n        const next = list[Math.min(idx, list.length - 1)];\n        ifSetCurrentId(next.id);\n    } else {\n        ifSetCurrentId(null);\n    }\n    updateInterfacesHeaderUI();\n    renderInterfacesForm();\n}\n\nasync function handleInterfacesSave() {\n    const list = ifLoadAll();\n    try {\n        if (isOffline()) throw new Error('offline');\n        await API.postForm('/interfaces/apply', { payload: JSON.stringify(list) });\n        setStatus('ok', t('interfaces_saved'));\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C baseline \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\n        try {\n            interfacesBaselineJSON = JSON.stringify(list);\n            localStorage.setItem(IF_BASELINE_KEY, interfacesBaselineJSON);\n        } catch {}\n    } catch (e: any) {\n        if (e && String(e.message || e) === 'offline') {\n            setStatus('offline', t('offline_save_unavailable'));\n        } else {\n            setStatus('error', `${t('save_error')}: ${e?.message || e}`);\n        }\n    } finally {\n        updateInterfacesHeaderUI();\n    }\n}\n\n// --- \u0418\u0441\u043A\u0443\u0441\u0442\u0432\u0435\u043D\u043D\u0430\u044F \u0437\u0430\u0434\u0435\u0440\u0436\u043A\u0430 \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0446\u0432\u0435\u0442\u043E\u0432 \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440\u0430 ---\ntype StatusKind = '' | 'ok' | 'offline' | 'error' | 'busy';\nconst STATUS_COLOR_MIN_INTERVAL = 500; // \u043C\u0441 \u043C\u0435\u0436\u0434\u0443 \u0441\u043C\u0435\u043D\u0430\u043C\u0438 \u0446\u0432\u0435\u0442\u0430\nlet lastIndicatorSwitch = 0; // \u043C\u043E\u043C\u0435\u043D\u0442 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u043A\u043B\u0430\u0441\u0441\u0430\nlet indicatorTimer: number | null = null; // \u0442\u0430\u0439\u043C\u0435\u0440 \u043E\u0442\u043B\u043E\u0436\u0435\u043D\u043D\u043E\u0433\u043E \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u044F\nlet indicatorPending: { kind: StatusKind; text: string } | null = null; // \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u044F\u044F \u0437\u0430\u043F\u0440\u043E\u0448\u0435\u043D\u043D\u0430\u044F\n\nfunction showToast(kind: StatusKind, text: string) {\n    const container = document.getElementById('toast-container');\n    if (!container || !kind || kind === 'busy') return;\n\n    // \u041F\u0440\u0435\u0434\u043E\u0442\u0432\u0440\u0430\u0449\u0435\u043D\u0438\u0435 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432 (\u0435\u0441\u043B\u0438 \u0442\u0430\u043A\u043E\u0435 \u0436\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0443\u0436\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F)\n    const existing = Array.from(container.children).find(el => el.textContent === text);\n    if (existing) return;\n\n    const toast = document.createElement('div');\n    toast.className = `toast ${kind}`;\n    toast.textContent = text;\n    container.appendChild(toast);\n\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\n    requestAnimationFrame(() => {\n        toast.classList.add('visible');\n    });\n\n    // \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435\n    const duration = kind === 'ok' ? 3000 : 5000;\n    setTimeout(() => {\n        toast.classList.remove('visible');\n        // \u0414\u0430\u0435\u043C \u0432\u0440\u0435\u043C\u044F \u043D\u0430 \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u044E \u0438\u0441\u0447\u0435\u0437\u043D\u043E\u0432\u0435\u043D\u0438\u044F \u043F\u0435\u0440\u0435\u0434 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435\u043C \u0438\u0437 DOM\n        setTimeout(() => {\n            if (toast.parentElement) toast.remove();\n        }, 400);\n    }, duration);\n}\n\nfunction applyIndicator(kind: StatusKind, text: string) {\n    const el = document.getElementById('net-status');\n    if (!el) return;\n    const hasText = typeof text === 'string' && text.trim().length > 0;\n    el.className = `status${kind ? ' ' + kind : ''}`;\n    // \u0422\u0435\u043A\u0441\u0442 \u0432 \u0441\u0430\u043C\u043E\u043C \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u2014 \u0442\u043E\u043B\u044C\u043A\u043E \u0446\u0432\u0435\u0442/tooltip\n    el.textContent = '';\n    // Tooltip \u0443 \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440\u0430\n    if (kind === 'ok') {\n        el.setAttribute('title', t('online'));\n    } else if (kind === 'offline') {\n        el.setAttribute('title', hasText ? text.trim() : t('offline'));\n    } else if (kind === 'error') {\n        el.setAttribute('title', hasText ? text.trim() : t('error'));\n    } else if (kind === 'busy') {\n        el.setAttribute('title', hasText ? text.trim() : t('requesting'));\n    } else {\n        el.removeAttribute('title');\n    }\n    lastIndicatorSwitch = Date.now();\n}\n\nfunction scheduleIndicator(kind: StatusKind, text: string) {\n    indicatorPending = { kind, text };\n    const now = Date.now();\n    const elapsed = now - lastIndicatorSwitch;\n    const delay = elapsed >= STATUS_COLOR_MIN_INTERVAL ? 0 : (STATUS_COLOR_MIN_INTERVAL - elapsed);\n\n    if (indicatorTimer !== null) {\n        // \u041F\u0435\u0440\u0435\u043F\u043B\u0430\u043D\u0438\u0440\u0443\u0435\u043C \u2014 \u043F\u0440\u0438\u043C\u0435\u043D\u0438\u043C \u0441\u0430\u043C\u043E\u0435 \u0441\u0432\u0435\u0436\u0435\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0432 \u043D\u0443\u0436\u043D\u044B\u0439 \u043C\u043E\u043C\u0435\u043D\u0442\n        clearTimeout(indicatorTimer);\n        indicatorTimer = null;\n    }\n\n    if (delay === 0) {\n        const p = indicatorPending;\n        if (p) applyIndicator(p.kind, p.text);\n    } else {\n        indicatorTimer = window.setTimeout(() => {\n            indicatorTimer = null;\n            const p = indicatorPending;\n            if (p) applyIndicator(p.kind, p.text);\n        }, delay);\n    }\n}\n\nfunction setStatus(kind: StatusKind, text: string) {\n    const hasText = typeof text === 'string' && text.trim().length > 0;\n\n    if (hasText && kind !== 'busy') {\n        showToast(kind, text.trim());\n    }\n\n    // \u0412\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u044B\u0439 \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u2014 \u043C\u0435\u043D\u044F\u0435\u043C \u0446\u0432\u0435\u0442 \u0441 \u0438\u0441\u043A\u0443\u0441\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0439 \u0437\u0430\u0434\u0435\u0440\u0436\u043A\u043E\u0439\n    scheduleIndicator(kind, text);\n}\n\nfunction startApp() {\n    Auth.getInstance().checkAuth(initUI);\n}\n\n// Init after DOM ready (supports file:// open)\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', startApp);\n} else {\n    startApp();\n}\n\n// -----------------------------\n// \u0420\u0430\u0437\u0434\u0435\u043B\u044B: WiFi, Ethernet \u2014 \u0444\u043E\u0440\u043C\u044B\n// -----------------------------\n\ntype WifiInfo = {\n    mode?: 'client' | 'ap' | string;\n    ssid?: string;\n    password?: string;\n    ip_config?: 'dhcp' | 'static' | string;\n    ip?: string;\n    netmask?: string;\n    gateway?: string;\n    dns1?: string;\n    dns2?: string;\n};\n\ntype EthernetInfo = {\n    ip_config?: 'dhcp' | 'static' | string;\n    ip?: string;\n    netmask?: string;\n    gateway?: string;\n    dns1?: string;\n    dns2?: string;\n};\n\ntype LoRAInfo = {\n    spi?: string;\n    cs?: string;\n    rst?: string;\n    busy?: string;\n    dio1?: string;\n    rxen?: string;\n    txen?: string;\n};\n\n// ----- FreeDV -----\ntype FreeDVInfo = {\n    mode?: 'FSK2' | 'FSK4' | string;\n    rate?: string | number; // 500, 200, 100, 50, 20\n    ldpc?: '768/256' | '512/256' | string;\n};\n\n// \u0421\u0435\u043A\u0446\u0438\u044F LoraSPI \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u2014 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0442\u0438\u043F\u044B \u0438 \u043F\u043E\u043B\u044F \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044E\u0442\u0441\u044F\n\nfunction byId<T extends HTMLElement>(id: string): T {\n    const el = document.getElementById(id);\n    if (!el) throw new Error(`Element #${id} not found`);\n    return el as T;\n}\n\n// \u0421\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439: \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0443\u044E \u0448\u0438\u0440\u0438\u043D\u0443 \u0442\u0430\u043A,\n// \u0447\u0442\u043E\u0431\u044B \u043E\u043D\u0430 \u0432\u043C\u0435\u0449\u0430\u043B\u0430 \u043A\u0430\u043A \u043E\u0431\u044B\u0447\u043D\u0443\u044E \u043D\u0430\u0434\u043F\u0438\u0441\u044C, \u0442\u0430\u043A \u0438 \u00AB\u0437\u0430\u043D\u044F\u0442\u0443\u044E\u00BB (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u2026\u00BB)\nfunction stabilizeActionButton(btn: HTMLButtonElement, busyText: string) {\n    try {\n        const original = btn.textContent ?? '';\n        // \u0428\u0438\u0440\u0438\u043D\u0430 \u0441 \u043E\u0431\u044B\u0447\u043D\u043E\u0439 \u043D\u0430\u0434\u043F\u0438\u0441\u044C\u044E\n        const w1 = btn.offsetWidth;\n        // \u0412\u0440\u0435\u043C\u0435\u043D\u043D\u043E \u043F\u043E\u0434\u043C\u0435\u043D\u0438\u043C \u0442\u0435\u043A\u0441\u0442 \u0438 \u0438\u0437\u043C\u0435\u0440\u0438\u043C \u0435\u0449\u0451 \u0440\u0430\u0437\n        btn.textContent = busyText;\n        // \u041F\u0440\u0438\u043D\u0443\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u0440\u0435\u0444\u043B\u043E\u0443\n        const w2 = btn.offsetWidth;\n        // \u0412\u0435\u0440\u043D\u0451\u043C \u0438\u0441\u0445\u043E\u0434\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442\n        btn.textContent = original;\n        const minW = Math.max(w1, w2);\n        if (minW) btn.style.minWidth = `${minW}px`;\n    } catch {}\n}\n\n// \u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0440\u0430\u0437\u0434\u0435\u043B\u0430 \u0431\u0435\u0437 \u0432\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u00AB\u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F\u00BB \u0440\u0430\u0437\u0434\u0435\u043B\u0430,\n// \u0447\u0442\u043E\u0431\u044B UI \u043D\u0435 \u0434\u0451\u0440\u0433\u0430\u043B\u0441\u044F: \u0431\u0435\u0437 \u0437\u0430\u0442\u0443\u0445\u0430\u043D\u0438\u044F, \u0431\u0435\u0437 \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0433\u043B\u0443\u0448\u0435\u043A \u0438 \u0431\u0435\u0437 \u0441\u0431\u0440\u043E\u0441\u0430 \u0441\u043A\u0440\u043E\u043B\u043B\u0430.\nasync function refreshCurrentSectionData() {\n    if (!currentSectionId) return;\n    const bodyEl = document.getElementById('content-body') as HTMLElement | null;\n    // \u0417\u0430\u0444\u0438\u043A\u0441\u0438\u0440\u0443\u0435\u043C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0432\u044B\u0441\u043E\u0442\u0443 \u0438 \u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0441\u043A\u0440\u043E\u043B\u043B\u0430, \u0447\u0442\u043E\u0431\u044B \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044C \u0441\u043A\u0430\u0447\u043A\u043E\u0432\n    const prevHeight = bodyEl ? bodyEl.offsetHeight : 0;\n    const prevScroll = bodyEl ? bodyEl.scrollTop : 0;\n    if (bodyEl && prevHeight) {\n        bodyEl.style.minHeight = `${prevHeight}px`;\n    }\n    try {\n        await loadSectionData(currentSectionId);\n    } catch {\n        // \u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0436\u0435 \u043E\u0442\u0440\u0430\u0436\u0435\u043D\u0430 \u0432 \u0441\u0442\u0430\u0442\u0443\u0441-\u0431\u0430\u0440\u0435 \u0432\u043D\u0443\u0442\u0440\u0438 loadSectionData.\n        // \u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u0440\u0430\u0437\u0434\u0435\u043B\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043A\u0430\u043A \u0435\u0441\u0442\u044C, \u0447\u0442\u043E\u0431\u044B \u043D\u0435 \u0431\u044B\u043B\u043E \u0434\u0451\u0440\u0433\u0430\u043D\u044C\u044F.\n    } finally {\n        if (bodyEl) {\n            // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u043C \u0432\u044B\u0441\u043E\u0442\u0443 \u0438 \u0441\u043A\u0440\u043E\u043B\u043B \u043F\u043E\u0441\u043B\u0435 \u043F\u0435\u0440\u0435\u0440\u0438\u0441\u043E\u0432\u043A\u0438\n            bodyEl.style.minHeight = '';\n            bodyEl.scrollTop = prevScroll;\n        }\n    }\n}\n\n// \u041B\u043E\u043A\u0430\u043B\u044C\u043D\u0430\u044F \u043E\u0447\u0438\u0441\u0442\u043A\u0430 \u043F\u043E\u043B\u0435\u0439 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0444\u043E\u0440\u043C\u044B (\u0431\u0435\u0437 \u0437\u0430\u043F\u0440\u043E\u0441\u043E\u0432 \u043A \u0431\u044D\u043A\u0435\u043D\u0434\u0443)\nfunction clearCurrentFormFields() {\n    const clear = (id: string) => {\n        const el = document.getElementById(id);\n        if (el && el instanceof HTMLInputElement) {\n            el.value = '';\n            el.dispatchEvent(new Event('input', { bubbles: true }));\n            el.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n    };\n\n    if (currentSectionId === 'wifi') {\n        ['wifi-ssid', 'wifi-pass', 'wifi-ip', 'wifi-mask', 'wifi-gw', 'wifi-dns1', 'wifi-dns2']\n            .forEach(clear);\n        return;\n    }\n    if (currentSectionId === 'ethernet') {\n        ['eth-ip', 'eth-mask', 'eth-gw', 'eth-dns1', 'eth-dns2']\n            .forEach(clear);\n        return;\n    }\n    if (currentSectionId === 'lora') {\n        ['spi', 'cs', 'rst', 'busy', 'dio1', 'rxen', 'txen']\n            .forEach(clear);\n        return;\n    }\n    if (currentSectionId === 'freedv') {\n        ['freedv-mode', 'freedv-rate', 'freedv-ldpc']\n            .forEach(clear);\n        return;\n    }\n    // \u0414\u043B\u044F \u043F\u0440\u043E\u0447\u0438\u0445 \u0440\u0430\u0437\u0434\u0435\u043B\u043E\u0432 \u2014 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u0434\u0435\u043B\u0430\u0435\u043C\n}\n\nfunction uniq(values: (string | undefined | null)[]): string[] {\n    const seen = new Set<string>();\n    const out: string[] = [];\n    for (const v of values) {\n        const s = (v ?? '').trim();\n        if (!s) continue;\n        if (!seen.has(s)) {\n            seen.add(s);\n            out.push(s);\n        }\n    }\n    return out;\n}\n\nfunction attachDatalist(input: HTMLInputElement, options: string[], idSuffix: string) {\n    const listId = `${input.id}-list-${idSuffix}`;\n    let dl = document.getElementById(listId) as HTMLDataListElement | null;\n    if (!dl) {\n        dl = document.createElement('datalist');\n        dl.id = listId;\n        document.body.appendChild(dl);\n    }\n\n    const currentOptions = Array.from(dl.options).map(o => o.value);\n    if (currentOptions.length === options.length && currentOptions.every((v, i) => v === options[i])) {\n        if (input.getAttribute('list') !== listId) {\n            input.setAttribute('list', listId);\n        }\n        return;\n    }\n\n    dl.innerHTML = '';\n    options.forEach((v) => {\n        const opt = document.createElement('option');\n        opt.value = v;\n        dl!.appendChild(opt);\n    });\n    input.setAttribute('list', listId);\n}\n\nfunction isValidIp(v?: string): boolean {\n    if (!v) return false;\n    // \u043F\u0440\u043E\u0441\u0442\u0430\u044F \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 IPv4\n    const m = v.trim().match(/^([0-9]{1,3}\\.){3}[0-9]{1,3}$/);\n    if (!m) return false;\n    return v.split('.').every((n) => {\n        const x = Number(n);\n        return x >= 0 && x <= 255 && String(x) === n.replace(/^0+(?=\\d)/, (s) => (n === '0' ? '0' : s));\n    });\n}\n\nfunction parseInfoForSection(\n    id: string,\n    data: unknown,\n): Partial<WifiInfo> | Partial<EthernetInfo> | Partial<LoRAInfo> | Partial<FreeDVInfo> | undefined {\n    // 1) \u0423\u0436\u0435 \u043E\u0431\u044A\u0435\u043A\u0442 \u2014 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u043A\u0430\u043A \u0435\u0441\u0442\u044C\n    let obj: any = (data && typeof data === 'object') ? data : undefined;\n    // 2) \u041F\u043E\u043F\u044B\u0442\u0430\u0442\u044C\u0441\u044F \u0440\u0430\u0441\u043F\u0430\u0440\u0441\u0438\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0443\n    if (!obj && typeof data === 'string') {\n        const s = data.trim();\n        // \u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043F\u0440\u043E\u0431\u0443\u0435\u043C \u043A\u0430\u043A JSON\n        try {\n            const j = JSON.parse(s);\n            if (j && typeof j === 'object') obj = j;\n        } catch {}\n        // \u0415\u0441\u043B\u0438 \u043D\u0435 JSON \u2014 \u043F\u0430\u0440\u0441\u0438\u043C \u043A\u0430\u043A \u043D\u0430\u0431\u043E\u0440 \u043F\u0430\u0440 key=value\n        if (!obj) obj = parseKeyValueString(s);\n    }\n    // 3) \u0415\u0441\u043B\u0438 \u043E\u0442\u0432\u0435\u0442 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442 \u0432 \u00AB\u043A\u043E\u043D\u0432\u0435\u0440\u0442\u0435\u00BB { section, data, updatedAt }, \u0440\u0430\u0437\u0432\u0435\u0440\u043D\u0451\u043C data\n    if (obj && typeof obj === 'object' && Object.prototype.hasOwnProperty.call(obj, 'data')) {\n        let inner: any = (obj as any).data;\n        if (typeof inner === 'string') {\n            const s = inner.trim();\n            try {\n                const j = JSON.parse(s);\n                if (j && typeof j === 'object') inner = j;\n            } catch {}\n            if (typeof inner === 'string') {\n                // \u043F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u043A key=value\n                inner = parseKeyValueString(inner);\n            }\n        }\n        if (inner && typeof inner === 'object') {\n            obj = inner;\n        } else {\n            // \u0435\u0441\u043B\u0438 data \u043F\u0443\u0441\u0442\u0430\u044F/\u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0430\u044F \u2014 \u0434\u0430\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0430\u0435\u043C\n            return undefined;\n        }\n    }\n    if (!obj || typeof obj !== 'object') return undefined;\n\n    const norm = normalizeKeys(obj);\n    if (id === 'wifi') {\n        const out: Partial<WifiInfo> = {};\n        if ('mode' in norm) out.mode = String(norm.mode) as any;\n        if ('ssid' in norm) out.ssid = toStr(norm.ssid);\n        if ('password' in norm) out.password = toStr(norm.password);\n        if ('ip_config' in norm) out.ip_config = normalizeIpConfig(norm.ip_config);\n        if ('ip' in norm) out.ip = toStr(norm.ip);\n        if ('netmask' in norm) out.netmask = toStr(norm.netmask);\n        if ('gateway' in norm) out.gateway = toStr(norm.gateway);\n        if ('dns1' in norm) out.dns1 = toStr(norm.dns1);\n        if ('dns2' in norm) out.dns2 = toStr(norm.dns2);\n        return out;\n    } else if (id === 'ethernet') {\n        const out: Partial<EthernetInfo> = {};\n        if ('ip_config' in norm) out.ip_config = normalizeIpConfig(norm.ip_config);\n        if ('ip' in norm) out.ip = toStr(norm.ip);\n        if ('netmask' in norm) out.netmask = toStr(norm.netmask);\n        if ('gateway' in norm) out.gateway = toStr(norm.gateway);\n        if ('dns1' in norm) out.dns1 = toStr(norm.dns1);\n        if ('dns2' in norm) out.dns2 = toStr(norm.dns2);\n        return out;\n    } else if (id === 'lora') {\n        const out: Partial<LoRAInfo> = {};\n        if ('spi' in norm) out.spi = toStr(norm.spi);\n        if ('cs' in norm) out.cs = toStr(norm.cs);\n        if ('rst' in norm) out.rst = toStr(norm.rst);\n        if ('busy' in norm) out.busy = toStr(norm.busy);\n        if ('dio1' in norm) out.dio1 = toStr(norm.dio1);\n        if ('rxen' in norm) out.rxen = toStr(norm.rxen);\n        if ('txen' in norm) out.txen = toStr(norm.txen);\n        return out;\n    } else if (id === 'freedv') {\n        const out: Partial<FreeDVInfo> = {};\n        if ('mode' in norm) out.mode = String(norm.mode).toUpperCase() as any;\n        if ('rate' in norm) out.rate = toStr(norm.rate);\n        if ('ldpc' in norm) out.ldpc = toStr(norm.ldpc);\n        return out;\n    }\n    return undefined;\n}\n\nfunction toStr(v: any): string {\n    if (v === null || v === undefined) return '';\n    return String(v).trim();\n}\n\nfunction normalizeIpConfig(v: any): 'dhcp' | 'static' | string {\n    const s = toStr(v).toLowerCase();\n    if (s === 'dhcp' || s === 'auto' || s === 'automatic') return 'dhcp';\n    if (s === 'static' || s === 'manual' || s === 'fixed') return 'static';\n    return (s as any) || 'dhcp';\n}\n\nfunction parseKeyValueString(src: string): Record<string, string> {\n    const out: Record<string, string> = {};\n    const lines = src.replace(/\\r\\n?/g, '\\n').split('\\n');\n    for (let raw of lines) {\n        const line = raw.trim();\n        if (!line || line.startsWith('#') || line.startsWith(';') || line.startsWith('//')) continue;\n        let key = '';\n        let val = '';\n        const eqIdx = line.indexOf('=');\n        const colonIdx = line.indexOf(':');\n        let idx = -1;\n        if (eqIdx >= 0 && (colonIdx < 0 || eqIdx < colonIdx)) idx = eqIdx; else if (colonIdx >= 0) idx = colonIdx;\n        if (idx < 0) continue;\n        key = line.slice(0, idx).trim();\n        val = line.slice(idx + 1).trim();\n        // \u0423\u0431\u0438\u0440\u0430\u0435\u043C \u043A\u0430\u0432\u044B\u0447\u043A\u0438 \u0432\u043E\u043A\u0440\u0443\u0433 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\n        if ((val.startsWith('\"') && val.endsWith('\"')) || (val.startsWith(\"'\") && val.endsWith(\"'\"))) {\n            val = val.slice(1, -1);\n        }\n        if (key) out[key] = val;\n    }\n    return out;\n}\n\n// --- RNSD: \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 ---\nfunction unwrapDataPayload(input: unknown): unknown {\n    // \u0420\u0430\u0437\u0432\u043E\u0440\u0430\u0447\u0438\u0432\u0430\u0435\u043C \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u044B\u0439 \u043A\u043E\u043D\u0432\u0435\u0440\u0442 { data, ... } \u0438\u043B\u0438 { config } / { content }\n    if (input && typeof input === 'object') {\n        const obj: any = input as any;\n        if (Object.prototype.hasOwnProperty.call(obj, 'data')) return obj.data;\n        if (Object.prototype.hasOwnProperty.call(obj, 'config')) return obj.config;\n        if (Object.prototype.hasOwnProperty.call(obj, 'content')) return obj.content;\n    }\n    return input;\n}\n\nfunction renderRnsdConfig(data: unknown | undefined) {\n    const bodyEl = document.getElementById('content-body');\n    if (!bodyEl) return;\n    bodyEl.innerHTML = '';\n\n    const wrap = document.createElement('div');\n    wrap.className = 'form';\n\n    // \u0412\u0441\u043F\u043E\u043C\u043E\u0433\u0430\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u044F: \u043F\u043E\u043F\u044B\u0442\u0430\u0442\u044C\u0441\u044F \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0445\u043E\u0434 \u043D\u0430 RNSD \u0438 SPI\n    const splitPayload = (input: unknown): { raw: unknown; rnsd: any; spi: any } => {\n        const raw = unwrapDataPayload(input);\n        let obj: any | undefined;\n        // \u041D\u043E\u0440\u043C\u0430\u043B\u0438\u0437\u0443\u0435\u043C \u0432 \u043E\u0431\u044A\u0435\u043A\u0442, \u0435\u0441\u043B\u0438 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\n        if (raw && typeof raw === 'object') {\n            obj = raw as any;\n        } else if (typeof raw === 'string') {\n            const s = raw.trim();\n            // \u041F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C JSON\n            try {\n                const j = JSON.parse(s);\n                if (j && typeof j === 'object') obj = j;\n            } catch {}\n            // \u041F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C key=value\n            if (!obj && s) obj = parseKeyValueString(s);\n        }\n\n        // \u0415\u0441\u043B\u0438 \u043E\u0431\u044A\u0435\u043A\u0442 \u043D\u0435 \u043F\u043E\u043B\u0443\u0447\u0438\u043B\u0441\u044F \u2014 \u0432\u0435\u0440\u043D\u0451\u043C \u043A\u0430\u043A \u0435\u0441\u0442\u044C \u0432 RNSD\n        if (!obj || typeof obj !== 'object') {\n            return { raw, rnsd: raw, spi: undefined };\n        }\n\n        const isSpiKey = (k: string) => {\n            const kk = String(k).toLowerCase();\n            // \u042D\u0432\u0440\u0438\u0441\u0442\u0438\u043A\u0430: \u043B\u044E\u0431\u044B\u0435 \u043A\u043B\u044E\u0447\u0438, \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0435 'spi', \u0430 \u0442\u0430\u043A\u0436\u0435 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0451\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044F \u0448\u0438\u043D\n            if (kk.includes('spi')) return true;\n            // \u0422\u0438\u043F\u0438\u0447\u043D\u044B\u0435 GPIO/\u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\u043D\u044B\u0435 \u043B\u0438\u043D\u0438\u0438 \u0434\u043B\u044F \u0440\u0430\u0434\u0438\u043E\u043C\u043E\u0434\u0435\u043C\u043E\u0432\n            if (kk.startsWith('gpio')) return true; // gpio_irq_port, gpio_busy_pin, gpio_tx_en_*\n            if (kk.includes('irq') || kk.includes('busy') || kk.includes('nrst') || kk.includes('reset') || kk.includes('tx_en') || kk.includes('rx_en') || kk.includes('txen') || kk.includes('rxen')) return true;\n            const known = ['miso', 'mosi', 'sck', 'clk', 'cs', 'chipselect', 'baud', 'speed', 'mode'];\n            // \u0435\u0441\u043B\u0438 \u043A\u043B\u044E\u0447 \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D \u043A\u0430\u043A spi_* \u043E\u043D \u0443\u0436\u0435 \u043F\u043E\u0439\u043C\u0430\u043D, \u0438\u043D\u0430\u0447\u0435 \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u043C \u0441\u043E\u0441\u0442\u0430\u0432\u043D\u044B\u0435 \u0432\u0438\u0434\u0430 spi.mode (\u0443\u0436\u0435 \u043F\u043E\u0439\u043C\u0430\u043D\u043E),\n            // \u0437\u0434\u0435\u0441\u044C \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u043C \u0441\u043B\u0443\u0447\u0430\u0438 \u043A\u043E\u0433\u0434\u0430 \u0441\u0435\u043A\u0446\u0438\u044F \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u0432\u044B\u043D\u0435\u0441\u0435\u043D\u0430 \u0432 \u043F\u043E\u0434-\u043E\u0431\u044A\u0435\u043A\u0442 obj.spi\n            return known.includes(kk) || kk.startsWith('spi.');\n        };\n\n        // \u0415\u0441\u043B\u0438 \u0432\u043D\u0443\u0442\u0440\u0438 \u0435\u0441\u0442\u044C \u043F\u043E\u0434-\u043E\u0431\u044A\u0435\u043A\u0442 spi \u2014 \u0431\u0435\u0440\u0451\u043C \u0435\u0433\u043E \u0446\u0435\u043B\u0438\u043A\u043E\u043C\n        let spi: any = undefined;\n        if (Object.prototype.hasOwnProperty.call(obj, 'spi')) {\n            const v = (obj as any).spi;\n            if (v && typeof v === 'object') spi = v; else spi = v;\n        }\n\n        // \u041E\u0441\u0442\u0430\u043B\u044C\u043D\u043E\u0435 \u0440\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u043C \u043F\u043E \u044D\u0432\u0440\u0438\u0441\u0442\u0438\u043A\u0435\n        const rnsd: Record<string, any> = {};\n        const extraSpi: Record<string, any> = {};\n        for (const [k, v] of Object.entries(obj)) {\n            if (k === 'spi') continue;\n            if (isSpiKey(k)) extraSpi[k] = v; else rnsd[k] = v;\n        }\n        // \u041E\u0431\u044A\u0435\u0434\u0438\u043D\u0438\u0442\u044C spi \u0438\u0437 \u043F\u043E\u043B\u044F \u0438 \u0441\u043E\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u043F\u043E \u043A\u043B\u044E\u0447\u0430\u043C\n        if (spi && typeof spi === 'object' && Object.keys(extraSpi).length > 0) {\n            spi = { ...spi, ...extraSpi };\n        } else if (!spi && Object.keys(extraSpi).length > 0) {\n            spi = extraSpi;\n        }\n\n        return { raw, rnsd, spi };\n    };\n\n    const parts = splitPayload(data);\n\n    // \u0421\u0435\u043A\u0446\u0438\u044F RNSD\n    const rnsdBox = document.createElement('section');\n    rnsdBox.className = 'form-section';\n    const rnsdTitle = document.createElement('div');\n    rnsdTitle.className = 'form-title';\n    rnsdTitle.textContent = 'RNSD';\n    rnsdBox.appendChild(rnsdTitle);\n    const rnsdPre = document.createElement('pre');\n    rnsdPre.className = 'code';\n    if (parts.rnsd === undefined || parts.rnsd === null || (typeof parts.rnsd === 'object' && Object.keys(parts.rnsd).length === 0)) {\n        // \u0415\u0441\u043B\u0438 \u043D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u0434\u0435\u043B\u0438\u0442\u044C RNSD \u0438 \u0435\u0441\u0442\u044C \u00AB\u0441\u044B\u0440\u043E\u0439\u00BB \u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u0441\u0442\u0440\u043E\u043A\u043E\u0439 \u2014 \u043F\u043E\u043A\u0430\u0436\u0435\u043C \u0435\u0433\u043E \u0437\u0434\u0435\u0441\u044C\n        if (typeof parts.raw === 'string') rnsdPre.textContent = String(parts.raw);\n        else if (parts.raw && typeof parts.raw === 'object') {\n            try { rnsdPre.textContent = JSON.stringify(parts.raw, null, 2); } catch { rnsdPre.textContent = String(parts.raw); }\n        } else {\n            rnsdPre.textContent = t('no_rnsd_data');\n        }\n    } else if (typeof parts.rnsd === 'string') {\n        rnsdPre.textContent = parts.rnsd;\n    } else if (typeof parts.rnsd === 'object') {\n        try { rnsdPre.textContent = JSON.stringify(parts.rnsd, null, 2); } catch { rnsdPre.textContent = String(parts.rnsd); }\n    } else {\n        rnsdPre.textContent = String(parts.rnsd);\n    }\n    rnsdBox.appendChild(rnsdPre);\n\n    // \u0421\u0435\u043A\u0446\u0438\u044F SPI\n    const spiBox = document.createElement('section');\n    spiBox.className = 'form-section';\n    const spiTitle = document.createElement('div');\n    spiTitle.className = 'form-title';\n    spiTitle.textContent = 'SPI';\n    spiBox.appendChild(spiTitle);\n    // \u0424\u043E\u0440\u043C\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A SPI/GPIO: \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043D\u0430 libgpiod \u0438 dev-\u043F\u0443\u0442\u044C SPI\n    const getStr = (v: any): string | undefined => {\n        if (v === null || v === undefined) return undefined;\n        if (typeof v === 'string') {\n            const s = v.trim();\n            return s ? s : undefined;\n        }\n        if (typeof v === 'number') {\n            return Number.isFinite(v) ? String(Math.trunc(v)) : undefined;\n        }\n        return undefined;\n    };\n    // \u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u043C \u0440\u0430\u0437\u043D\u044B\u0435 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u044B \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u044B \u0438\u0437 \u0431\u044D\u043A\u0435\u043D\u0434\u0430\n    const spiSrc: any = parts.spi && typeof parts.spi === 'object' ? parts.spi : {};\n\n    const buildSpiDevice = (): string | undefined => {\n        let dev = getStr(spiSrc.spi_device ?? spiSrc.device ?? spiSrc.dev ?? spiSrc.path ?? spiSrc.spi?.device ?? spiSrc.spi?.dev);\n        if (!dev) {\n            const portStr = getStr(spiSrc.spi_port ?? spiSrc.port ?? spiSrc.spi?.port);\n            const csStr = getStr(spiSrc.spi_cs ?? spiSrc.cs ?? spiSrc.chipselect ?? spiSrc.spi?.cs);\n            if (portStr !== undefined && csStr !== undefined) {\n                const p = String(portStr).replace(/\\D+/g, '');\n                const c = String(csStr).replace(/\\D+/g, '');\n                if (p !== '' && c !== '') dev = `/dev/spi${p}.${c}`;\n            }\n        }\n        if (dev) {\n            // \u043D\u043E\u0440\u043C\u0430\u043B\u0438\u0437\u0443\u0435\u043C \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u044B spi0.0 \u0431\u0435\u0437 \u043F\u0440\u0435\u0444\u0438\u043A\u0441\u0430\n            const m = /^(?:\\/dev\\/)?(spi\\d+\\.\\d+)$/.exec(dev);\n            if (m) dev = `/dev/${m[1]}`;\n        }\n        return dev;\n    };\n\n    const normChip = (v: any): string | undefined => {\n        let s = getStr(v);\n        if (!s) return undefined;\n        s = s.trim();\n        // \u0435\u0441\u043B\u0438 \u043F\u0440\u0438\u0448\u043B\u043E \u043F\u0440\u043E\u0441\u0442\u043E \u0447\u0438\u0441\u043B\u043E \u2014 \u0441\u0447\u0438\u0442\u0430\u0435\u043C, \u0447\u0442\u043E \u044D\u0442\u043E \u0438\u043D\u0434\u0435\u043A\u0441 gpiochipN\n        if (/^\\d+$/.test(s)) return `gpiochip${s}`;\n        // \u0435\u0441\u043B\u0438 \u043F\u0440\u0438\u0448\u043B\u043E /dev/gpiochipN \u2014 \u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C, \u043D\u043E \u043F\u0440\u0438\u0432\u0435\u0434\u0451\u043C \u043A gpiochipN\n        const m = /^(?:\\/dev\\/)?(gpiochip\\d+)$/.exec(s);\n        if (m) return m[1];\n        return s;\n    };\n    const normPin = (v: any): string | undefined => {\n        return getStr(v);\n    };\n\n    const initialSpi = {\n        spi_device: buildSpiDevice(),\n        // \u041D\u043E\u0432\u044B\u0435 \u043F\u043E\u043B\u044F \u0434\u043B\u044F \u0442\u0430\u0431\u043B\u0438\u0446\u044B SPI: Chip \u0438 Pin\n        spi_chip: (() => {\n            const dev = buildSpiDevice();\n            if (dev) {\n                const m = /^\\/dev\\/(spi\\d+)\\.(\\d+)$/.exec(dev);\n                if (m) return m[1];\n            }\n            const portStr = getStr(spiSrc.spi_port ?? spiSrc.port ?? spiSrc.spi?.port);\n            if (portStr !== undefined) {\n                const p = String(portStr).replace(/\\D+/g, '');\n                if (p !== '') return `spi${p}`;\n            }\n            return undefined;\n        })(),\n        spi_pin: (() => {\n            const dev = buildSpiDevice();\n            if (dev) {\n                const m = /^\\/dev\\/(spi\\d+)\\.(\\d+)$/.exec(dev);\n                if (m) return m[2];\n            }\n            const csStr = getStr(spiSrc.spi_cs ?? spiSrc.cs ?? spiSrc.chipselect ?? spiSrc.spi?.cs);\n            if (csStr !== undefined) {\n                const c = String(csStr).replace(/\\D+/g, '');\n                if (c !== '') return c;\n            }\n            return undefined;\n        })(),\n        gpio_irq_chip: normChip(spiSrc.gpio_irq_chip ?? spiSrc.irq_chip ?? spiSrc.gpio?.irq?.chip ?? spiSrc.gpio_irq_port ?? spiSrc.irq_port ?? spiSrc.gpio?.irq?.port),\n        gpio_irq_pin: normPin(spiSrc.gpio_irq_pin ?? spiSrc.irq_pin ?? spiSrc.gpio?.irq?.pin),\n        gpio_busy_chip: normChip(spiSrc.gpio_busy_chip ?? spiSrc.busy_chip ?? spiSrc.gpio?.busy?.chip ?? spiSrc.gpio_busy_port ?? spiSrc.busy_port ?? spiSrc.gpio?.busy?.port),\n        gpio_busy_pin: normPin(spiSrc.gpio_busy_pin ?? spiSrc.busy_pin ?? spiSrc.gpio?.busy?.pin),\n        gpio_nrst_chip: normChip(spiSrc.gpio_nrst_chip ?? spiSrc.nrst_chip ?? spiSrc.reset_chip ?? spiSrc.gpio?.nrst?.chip ?? spiSrc.gpio?.reset?.chip ?? spiSrc.gpio_nrst_port ?? spiSrc.nrst_port ?? spiSrc.gpio?.nrst?.port ?? spiSrc.gpio?.reset?.port),\n        gpio_nrst_pin: normPin(spiSrc.gpio_nrst_pin ?? spiSrc.nrst_pin ?? spiSrc.reset_pin ?? spiSrc.gpio?.nrst?.pin ?? spiSrc.gpio?.reset?.pin),\n        gpio_tx_en_chip: normChip(spiSrc.gpio_tx_en_chip ?? spiSrc.tx_en_chip ?? spiSrc.gpio?.tx_en?.chip ?? spiSrc.gpio?.txen?.chip ?? spiSrc.gpio_tx_en_port ?? spiSrc.tx_en_port ?? spiSrc.gpio?.tx_en?.port ?? spiSrc.gpio?.txen?.port),\n        gpio_tx_en_pin: normPin(spiSrc.gpio_tx_en_pin ?? spiSrc.tx_en_pin ?? spiSrc.gpio?.tx_en?.pin ?? spiSrc.gpio?.txen?.pin),\n        gpio_rx_en_chip: normChip(spiSrc.gpio_rx_en_chip ?? spiSrc.rx_en_chip ?? spiSrc.gpio?.rx_en?.chip ?? spiSrc.gpio?.rxen?.chip ?? spiSrc.gpio_rx_en_port ?? spiSrc.rx_en_port ?? spiSrc.gpio?.rx_en?.port ?? spiSrc.gpio?.rxen?.port),\n        gpio_rx_en_pin: normPin(spiSrc.gpio_rx_en_pin ?? spiSrc.rx_en_pin ?? spiSrc.gpio?.rx_en?.pin ?? spiSrc.gpio?.rxen?.pin),\n    } as Record<string, string | undefined>;\n\n    const grid = document.createElement('div');\n    grid.className = 'form-grid';\n    grid.innerHTML = `\n    <div class=\"gpio-table indent-left\" style=\"grid-column: 1 / -1;\">\n      <div class=\"gpio-header\"></div>\n      <div class=\"gpio-header\">Chip</div>\n      <div class=\"gpio-header\">Pin</div>\n\n      <div class=\"gpio-row-title\">SPI</div>\n      <input id=\"spi-chip\" type=\"text\" inputmode=\"text\" placeholder=\"spi0\">\n      <input id=\"spi-pin\" type=\"text\" inputmode=\"numeric\" placeholder=\"0\">\n\n      <div class=\"gpio-row-title\">IRQ</div>\n      <input id=\"gpio-irq-chip\" type=\"text\" inputmode=\"text\" placeholder=\"gpiochip1\">\n      <input id=\"gpio-irq-pin\" type=\"text\" inputmode=\"text\" placeholder=\"${t(\"num_or_name\")}\">\n\n      <div class=\"gpio-row-title\">Busy</div>\n      <input id=\"gpio-busy-chip\" type=\"text\" inputmode=\"text\" placeholder=\"gpiochip1\">\n      <input id=\"gpio-busy-pin\" type=\"text\" inputmode=\"text\" placeholder=\"${t(\"num_or_name\")}\">\n\n      <div class=\"gpio-row-title\">NRST</div>\n      <input id=\"gpio-nrst-chip\" type=\"text\" inputmode=\"text\" placeholder=\"gpiochip1\">\n      <input id=\"gpio-nrst-pin\" type=\"text\" inputmode=\"text\" placeholder=\"${t(\"num_or_name\")}\">\n\n      <div class=\"gpio-row-title\">TX EN</div>\n      <input id=\"gpio-tx-en-chip\" type=\"text\" inputmode=\"text\" placeholder=\"gpiochip1\">\n      <input id=\"gpio-tx-en-pin\" type=\"text\" inputmode=\"text\" placeholder=\"${t(\"num_or_name\")}\">\n\n      <div class=\"gpio-row-title\">RX EN</div>\n      <input id=\"gpio-rx-en-chip\" type=\"text\" inputmode=\"text\" placeholder=\"gpiochip1\">\n      <input id=\"gpio-rx-en-pin\" type=\"text\" inputmode=\"text\" placeholder=\"${t(\"num_or_name\")}\">\n    </div>\n  `;\n    spiBox.appendChild(grid);\n\n    // \u041A\u043D\u043E\u043F\u043A\u0430 \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C\u00BB \u0434\u043B\u044F SPI \u0443\u0434\u0430\u043B\u0435\u043D\u0430: \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u043E\u0431\u0449\u0438\u043C \u0434\u043B\u044F RNSD \u0438 SPI\n\n    // \u0412\u0430\u0436\u043D\u043E: \u0434\u043E\u0431\u0430\u0432\u0438\u043C \u0441\u0435\u043A\u0446\u0438\u0438 \u0432 DOM \u0434\u043E \u043F\u043E\u0438\u0441\u043A\u0430 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u043F\u043E id,\n    // \u0447\u0442\u043E\u0431\u044B document.getElementById \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E \u0438\u0445 \u043D\u0430\u0445\u043E\u0434\u0438\u043B\n    wrap.appendChild(rnsdBox);\n    wrap.appendChild(spiBox);\n    bodyEl.appendChild(wrap);\n\n    // \u0423\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0445 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0439\n    const setVal = (id: string, v: string | undefined) => {\n        const el = document.getElementById(id) as HTMLInputElement | null;\n        if (!el) return;\n        if (v === undefined || v === null) el.value = '';\n        else el.value = String(v);\n    };\n    setVal('spi-chip', initialSpi.spi_chip as any);\n    setVal('spi-pin', initialSpi.spi_pin as any);\n    setVal('gpio-irq-chip', initialSpi.gpio_irq_chip);\n    setVal('gpio-irq-pin', initialSpi.gpio_irq_pin);\n    setVal('gpio-busy-chip', initialSpi.gpio_busy_chip);\n    setVal('gpio-busy-pin', initialSpi.gpio_busy_pin);\n    setVal('gpio-nrst-chip', initialSpi.gpio_nrst_chip);\n    setVal('gpio-nrst-pin', initialSpi.gpio_nrst_pin);\n    setVal('gpio-tx-en-chip', initialSpi.gpio_tx_en_chip);\n    setVal('gpio-tx-en-pin', initialSpi.gpio_tx_en_pin);\n    setVal('gpio-rx-en-chip', initialSpi.gpio_rx_en_chip);\n    setVal('gpio-rx-en-pin', initialSpi.gpio_rx_en_pin);\n\n    // \u041B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 SPI \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442\n\n    type SpiModel = {\n        spi_chip: string; spi_pin: string;\n        gpio_irq_chip: string; gpio_irq_pin: string;\n        gpio_busy_chip: string; gpio_busy_pin: string;\n        gpio_nrst_chip: string; gpio_nrst_pin: string;\n        gpio_tx_en_chip: string; gpio_tx_en_pin: string;\n        gpio_rx_en_chip: string; gpio_rx_en_pin: string;\n    };\n    (() => {\n        // \u0415\u0441\u043B\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043F\u0440\u0438\u0441\u043B\u0430\u043B \u0445\u043E\u0442\u044C \u043E\u0434\u043D\u043E \u043F\u043E\u043B\u0435 \u2014 \u0441\u0447\u0438\u0442\u0430\u0435\u043C baseline \u0437\u0430\u0434\u0430\u043D\u043D\u044B\u043C\n        const any = Object.values(initialSpi).some((x) => x !== undefined);\n        if (!any) return null;\n        const toStr = (x: any) => (typeof x === 'string' ? x : undefined);\n        return {\n            spi_chip: toStr(initialSpi.spi_chip)!,\n            spi_pin: toStr(initialSpi.spi_pin)!,\n            gpio_irq_chip: toStr(initialSpi.gpio_irq_chip)!, gpio_irq_pin: toStr(initialSpi.gpio_irq_pin)!,\n            gpio_busy_chip: toStr(initialSpi.gpio_busy_chip)!, gpio_busy_pin: toStr(initialSpi.gpio_busy_pin)!,\n            gpio_nrst_chip: toStr(initialSpi.gpio_nrst_chip)!, gpio_nrst_pin: toStr(initialSpi.gpio_nrst_pin)!,\n            gpio_tx_en_chip: toStr(initialSpi.gpio_tx_en_chip)!, gpio_tx_en_pin: toStr(initialSpi.gpio_tx_en_pin)!,\n            gpio_rx_en_chip: toStr(initialSpi.gpio_rx_en_chip)!, gpio_rx_en_pin: toStr(initialSpi.gpio_rx_en_pin)!,\n        } as Partial<SpiModel>;\n    })();\n}\n\nfunction normalizeKeys(input: Record<string, any>): Record<string, any> {\n    const out: Record<string, any> = {};\n    const map: Record<string, string> = {\n        // Common\n        'ipcfg': 'ip_config',\n        'ip_config': 'ip_config',\n        'addrmode': 'ip_config',\n        'address': 'ip',\n        'ipaddr': 'ip',\n        'mask': 'netmask',\n        'netmask': 'netmask',\n        'gateway': 'gateway',\n        'gw': 'gateway',\n        'dns': 'dns1',\n        'dns1': 'dns1',\n        'dns2': 'dns2',\n        // WiFi\n        'mode': 'mode',\n        'ssid': 'ssid',\n        'pass': 'password',\n        'password': 'password',\n        'psk': 'password',\n        'key': 'password',\n        // FreeDV\n        'freedv_mode': 'mode',\n        'freedv_rate': 'rate',\n        'freedv_ldpc': 'ldpc',\n    };\n    for (const [k, v] of Object.entries(input)) {\n        const kk = k.trim().toLowerCase();\n        const target = map[kk] || kk;\n        if (target === 'dns1' && out['dns1'] !== undefined) {\n            // \u0435\u0441\u043B\u0438 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C dns1, \u043F\u043E\u043F\u044B\u0442\u043A\u0430 \u043F\u043E\u043B\u043E\u0436\u0438\u0442\u044C \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u043A\u0430\u043A dns2\n            out['dns2'] = v;\n        } else {\n            out[target] = v;\n        }\n    }\n    return out;\n}\n\nfunction renderWifiForm(info?: Partial<WifiInfo>) {\n    const body = byId<HTMLElement>('content-body');\n    const initial: WifiInfo = {\n        mode: info?.mode === 'ap' ? 'ap' : 'client',\n        ssid: info?.ssid ?? '',\n        password: info?.password ?? '',\n        ip_config: info?.ip_config === 'static' ? 'static' : 'dhcp',\n        ip: info?.ip ?? '',\n        netmask: info?.netmask ?? '',\n        gateway: info?.gateway ?? '',\n        dns1: info?.dns1 ?? '',\n        dns2: info?.dns2 ?? '',\n    };\n\n    body.innerHTML = '';\n\n    const form = document.createElement('div');\n    form.className = 'form';\n    // \u0420\u0430\u0437\u043C\u0435\u0442\u043A\u0430 \u0444\u043E\u0440\u043C\u044B \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A \u043A\u0430\u043A \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 (\u0431\u0435\u0437 JSON-\u0431\u043B\u043E\u043A\u0430 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F)\n    const settingsWrapper = document.createElement('div');\n    settingsWrapper.innerHTML = `\n    <div class=\"form-section\">\n      <div class=\"form-title\">WiFi</div>\n      <div class=\"form-grid\">\n        <label for=\"wifi-mode\">${t('mode')}</label>\n        <select id=\"wifi-mode\">\n          <option value=\"client\">${t('client')}</option>\n          <option value=\"ap\">${t('ap')}</option>\n        </select>\n\n        <label for=\"wifi-ssid\">SSID</label>\n        <input id=\"wifi-ssid\" type=\"text\" placeholder=\"${t('ssid')}\">\n\n        <label for=\"wifi-pass\">${t('password_label')}</label>\n        <div class=\"input-with-icon\">\n          <input id=\"wifi-pass\" type=\"password\" placeholder=\"${t('password')}\" autocomplete=\"current-password\">\n          <button id=\"wifi-pass-toggle\" type=\"button\" class=\"icon-btn\" aria-pressed=\"false\" aria-label=\"${t('show_pass')}\" title=\"${t('show_pass')}\">\n            <svg class=\"icon\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"${ICON_EYE}\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"form-section\">\n      <div class=\"form-title\">${t('ip_settings')}</div>\n      <div class=\"form-grid\">\n        <label for=\"wifi-ipcfg\">${t('address_mode')}</label>\n        <select id=\"wifi-ipcfg\">\n          <option value=\"dhcp\">DHCP</option>\n          <option value=\"static\">${t('static')}</option>\n        </select>\n\n        <label for=\"wifi-ip\">${t('ip_address')}</label>\n        <input id=\"wifi-ip\" type=\"text\" placeholder=\"192.168.1.10\">\n\n        <label for=\"wifi-mask\">${t('mask')}</label>\n        <input id=\"wifi-mask\" type=\"text\" placeholder=\"255.255.255.0\">\n\n        <label for=\"wifi-gw\">${t('gateway')}</label>\n        <input id=\"wifi-gw\" type=\"text\" placeholder=\"192.168.1.1\">\n\n        <label for=\"wifi-dns1\">DNS 1</label>\n        <input id=\"wifi-dns1\" type=\"text\" placeholder=\"8.8.8.8\">\n\n        <label for=\"wifi-dns2\">DNS 2</label>\n        <input id=\"wifi-dns2\" type=\"text\" placeholder=\"1.1.1.1\">\n      </div>\n    </div>\n\n    <div class=\"form-actions\">\n      <div id=\"wifi-hint\" class=\"hint\"></div>\n    </div>\n  `;\n    while (settingsWrapper.firstChild) {\n        form.appendChild(settingsWrapper.firstChild as Node);\n    }\n\n    body.appendChild(form);\n\n    // \u041F\u0440\u0435\u0444\u0438\u043B\u0434\n    (byId<HTMLSelectElement>('wifi-mode').value = initial.mode || 'client');\n    byId<HTMLInputElement>('wifi-ssid').value = initial.ssid || '';\n    byId<HTMLInputElement>('wifi-pass').value = initial.password || '';\n    (byId<HTMLSelectElement>('wifi-ipcfg').value = initial.ip_config || 'dhcp');\n    byId<HTMLInputElement>('wifi-ip').value = initial.ip || '';\n    byId<HTMLInputElement>('wifi-mask').value = initial.netmask || '';\n    byId<HTMLInputElement>('wifi-gw').value = initial.gateway || '';\n    byId<HTMLInputElement>('wifi-dns1').value = initial.dns1 || '';\n    byId<HTMLInputElement>('wifi-dns2').value = initial.dns2 || '';\n\n    const ipcfg = byId<HTMLSelectElement>('wifi-ipcfg');\n    const toggleStatic = () => {\n        const isStatic = ipcfg.value === 'static';\n        ['wifi-ip', 'wifi-mask', 'wifi-gw', 'wifi-dns1', 'wifi-dns2'].forEach((id) => {\n            byId<HTMLInputElement>(id).disabled = !isStatic;\n        });\n    };\n    ipcfg.addEventListener('change', toggleStatic);\n    toggleStatic();\n\n    // \u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0430\u0432\u0442\u043E\u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F\n    const afMode = getAutoFillMode();\n    const wifiProfile = loadLocalProfile<WifiInfo>('wifi');\n    if (afMode === 'fill' && wifiProfile) {\n        if (wifiProfile.mode) byId<HTMLSelectElement>('wifi-mode').value = wifiProfile.mode as any;\n        if (wifiProfile.ssid !== undefined) byId<HTMLInputElement>('wifi-ssid').value = wifiProfile.ssid || '';\n        if (wifiProfile.password !== undefined) byId<HTMLInputElement>('wifi-pass').value = wifiProfile.password || '';\n        if (wifiProfile.ip_config) byId<HTMLSelectElement>('wifi-ipcfg').value = wifiProfile.ip_config as any;\n        if (wifiProfile.ip !== undefined) byId<HTMLInputElement>('wifi-ip').value = wifiProfile.ip || '';\n        if (wifiProfile.netmask !== undefined) byId<HTMLInputElement>('wifi-mask').value = wifiProfile.netmask || '';\n        if (wifiProfile.gateway !== undefined) byId<HTMLInputElement>('wifi-gw').value = wifiProfile.gateway || '';\n        if (wifiProfile.dns1 !== undefined) byId<HTMLInputElement>('wifi-dns1').value = wifiProfile.dns1 || '';\n        if (wifiProfile.dns2 !== undefined) byId<HTMLInputElement>('wifi-dns2').value = wifiProfile.dns2 || '';\n        // \u043E\u0431\u043D\u043E\u0432\u0438\u043C \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E\u0441\u0442\u044C \u043F\u043E\u043B\u0435\u0439\n        toggleStatic();\n    } else if (afMode === 'hints') {\n        // \u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u0447\u0435\u0440\u0435\u0437 datalist (\u0431\u0435\u0437 \u043F\u0430\u0440\u043E\u043B\u044F)\n        const ssidVals = uniq([initial.ssid, wifiProfile?.ssid]);\n        if (ssidVals.length) attachDatalist(byId<HTMLInputElement>('wifi-ssid'), ssidVals, 'wifi');\n\n        const ipVals = uniq([initial.ip, wifiProfile?.ip, '192.168.1.10']);\n        attachDatalist(byId<HTMLInputElement>('wifi-ip'), ipVals, 'wifi');\n\n        const maskVals = uniq([initial.netmask, wifiProfile?.netmask, '255.255.255.0', '255.255.0.0']);\n        attachDatalist(byId<HTMLInputElement>('wifi-mask'), maskVals, 'wifi');\n\n        const gwVals = uniq([initial.gateway, wifiProfile?.gateway, '192.168.1.1']);\n        attachDatalist(byId<HTMLInputElement>('wifi-gw'), gwVals, 'wifi');\n\n        const dnsVals1 = uniq([initial.dns1, wifiProfile?.dns1, '8.8.8.8', '1.1.1.1']);\n        attachDatalist(byId<HTMLInputElement>('wifi-dns1'), dnsVals1, 'wifi');\n\n        const dnsVals2 = uniq([initial.dns2, wifiProfile?.dns2, '1.0.0.1', '8.8.4.4']);\n        attachDatalist(byId<HTMLInputElement>('wifi-dns2'), dnsVals2, 'wifi');\n    }\n\n    // \u041F\u043E \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044E UI: \u0443\u0431\u0438\u0440\u0430\u0435\u043C \u0433\u0430\u043B\u043E\u0447\u043A\u0438/\u0431\u0435\u0439\u0434\u0436\u0438 \u0440\u044F\u0434\u043E\u043C \u0441 \u043F\u043E\u043B\u044F\u043C\u0438\n\n    // \u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C \u043F\u043E\u043A\u0430\u0437\u0430 \u043F\u0430\u0440\u043E\u043B\u044F (\u0438\u043A\u043E\u043D\u043A\u0430 \u0432\u043D\u0443\u0442\u0440\u0438 \u043F\u043E\u043B\u044F)\n    const passInput = byId<HTMLInputElement>('wifi-pass');\n    const passToggle = document.getElementById('wifi-pass-toggle') as HTMLButtonElement | null;\n    if (passToggle) {\n        const passIconPath = passToggle.querySelector('path');\n        passToggle.addEventListener('click', () => {\n            const toShow = passInput.type === 'password';\n            passInput.type = toShow ? 'text' : 'password';\n            passToggle.setAttribute('aria-pressed', String(toShow));\n            passToggle.setAttribute('aria-label', toShow ? t('hide_pass') : t('show_pass'));\n            passToggle.setAttribute('title', toShow ? t('hide_pass') : t('show_pass'));\n            passToggle.classList.toggle('active', toShow);\n\n            if (passIconPath) {\n                passIconPath.setAttribute('d', toShow ? ICON_EYE_OFF : ICON_EYE);\n            }\n\n            // \u0412\u0435\u0440\u043D\u0451\u043C \u0444\u043E\u043A\u0443\u0441 \u0432 \u043F\u043E\u043B\u0435 \u0438 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u043C \u043A\u0443\u0440\u0441\u043E\u0440 \u0432 \u043A\u043E\u043D\u0435\u0446\n            try {\n                passInput.focus({ preventScroll: true });\n                const len = passInput.value.length;\n                passInput.setSelectionRange(len, len);\n            } catch {}\n        });\n    }\n\n    const hint = byId<HTMLDivElement>('wifi-hint');\n    const saveBtn = byId<HTMLButtonElement>('if-save-btn');\n\n    // \u0420\u0430\u043D\u0435\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043B\u0441\u044F serverBaseline; \u0442\u0435\u043F\u0435\u0440\u044C \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u043C \u043E\u0442 \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\u00BB\n\n    // \u0421\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0448\u0438\u0440\u0438\u043D\u044B \u043A\u043D\u043E\u043F\u043A\u0438 \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C\u00BB, \u0447\u0442\u043E\u0431\u044B \u0442\u0435\u043A\u0441\u0442 \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u2026\u00BB \u043D\u0435 \u043C\u0435\u043D\u044F\u043B \u043B\u044D\u0439\u0430\u0443\u0442\n    stabilizeActionButton(saveBtn, t('saving'));\n\n    // \u0412\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u044F \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E\u0441\u0442\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F: \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u043C \u0442\u043E\u043B\u044C\u043A\u043E \u0435\u0441\u043B\u0438 \u0435\u0441\u0442\u044C \u0434\u0438\u0444\u0444 \u043E\u0442\u043D\u043E\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\n    const normalizeWifi = (v: WifiInfo): WifiInfo => {\n        const t = (s?: string) => (s ?? '').trim();\n        const res: WifiInfo = {\n            mode: (v.mode || '') as any,\n            ssid: t(v.ssid),\n            password: t(v.password),\n            ip_config: (v.ip_config || '') as any,\n            ip: t(v.ip),\n            netmask: t(v.netmask),\n            gateway: t(v.gateway),\n            dns1: t(v.dns1),\n            dns2: t(v.dns2),\n        };\n        // \u0414\u043B\u044F DHCP \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0435 \u043F\u043E\u043B\u044F \u043F\u0440\u0438 \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0438\n        if (res.ip_config !== 'static') {\n            res.ip = '';\n            res.netmask = '';\n            res.gateway = '';\n            res.dns1 = '';\n            res.dns2 = '';\n        }\n        return res;\n    };\n\n    // \u0411\u0430\u0437\u0430 \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB: \u0435\u0441\u043B\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u043F\u0440\u0438\u0441\u043B\u0430\u043B \u0434\u0430\u043D\u043D\u044B\u0435,\n    // \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0444\u043E\u0440\u043C\u044B \u0434\u043E \u043F\u0435\u0440\u0432\u043E\u0433\u043E \u0432\u0432\u043E\u0434\u0430.\n    let lastSaved: WifiInfo = {\n        mode: initial.mode,\n        ssid: initial.ssid,\n        password: initial.password,\n        ip_config: initial.ip_config,\n        ip: initial.ip,\n        netmask: initial.netmask,\n        gateway: initial.gateway,\n        dns1: initial.dns1,\n        dns2: initial.dns2,\n    };\n\n    const isDifferentFromBaseline = (current: WifiInfo): boolean => {\n        const a = normalizeWifi(lastSaved);\n        const b = normalizeWifi(current);\n        // \u041F\u0430\u0440\u043E\u043B\u044C \u0441\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u0435\u043C \u043A\u0430\u043A \u043E\u0431\u044B\u0447\u043D\u0443\u044E \u0441\u0442\u0440\u043E\u043A\u0443; \u043E\u0442\u043B\u0438\u0447\u0438\u044F \u0443\u0447\u0438\u0442\u044B\u0432\u0430\u044E\u0442\u0441\u044F \u043A\u0430\u043A \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435\n        const pwChanged = (a.password || '') !== (b.password || '');\n        const eq =\n            (a.mode || '') === (b.mode || '') &&\n            (a.ssid || '') === (b.ssid || '') &&\n            (a.ip_config || '') === (b.ip_config || '') &&\n            (a.ip || '') === (b.ip || '') &&\n            (a.netmask || '') === (b.netmask || '') &&\n            (a.gateway || '') === (b.gateway || '') &&\n            (a.dns1 || '') === (b.dns1 || '') &&\n            (a.dns2 || '') === (b.dns2 || '');\n        return pwChanged || !eq;\n    };\n\n    const updateSaveAvailability = () => {\n        if (isOffline()) {\n            saveBtn.disabled = true;\n            hint.textContent = t('offline_save_unavailable_short');\n            hint.className = 'hint warn';\n            return;\n        }\n        const cur = collect();\n        const diff = isDifferentFromBaseline(cur);\n        saveBtn.disabled = !diff;\n        // \u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0443 \u043D\u0435 \u0442\u0440\u043E\u0433\u0430\u0435\u043C, \u0447\u0442\u043E\u0431\u044B \u043D\u0435 \u043C\u0435\u0448\u0430\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F\u043C \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u0438/\u0443\u0441\u043F\u0435\u0445\u0430\n    };\n\n    // \u0418\u0437\u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E \u043A\u043D\u043E\u043F\u043A\u0430 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u0430, \u0434\u0430\u043B\u044C\u0448\u0435 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0435\u0440\u0451\u0442 updateSaveAvailability\n    saveBtn.disabled = true;\n    if (isOffline()) {\n        hint.textContent = t('offline_save_unavailable_short');\n        hint.className = 'hint warn';\n    }\n    // \u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0444\u043E\u0440\u043C\u044B \u043F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C \u043D\u0430 \u0434\u0438\u0444\u0444\n    form.addEventListener('input', updateSaveAvailability);\n    form.addEventListener('change', () => { toggleStatic(); updateSaveAvailability(); });\n\n    const collect = (): WifiInfo => ({\n        mode: byId<HTMLSelectElement>('wifi-mode').value as any,\n        ssid: byId<HTMLInputElement>('wifi-ssid').value,\n        password: byId<HTMLInputElement>('wifi-pass').value,\n        ip_config: byId<HTMLSelectElement>('wifi-ipcfg').value as any,\n        ip: byId<HTMLInputElement>('wifi-ip').value,\n        netmask: byId<HTMLInputElement>('wifi-mask').value,\n        gateway: byId<HTMLInputElement>('wifi-gw').value,\n        dns1: byId<HTMLInputElement>('wifi-dns1').value,\n        dns2: byId<HTMLInputElement>('wifi-dns2').value,\n    });\n\n    // \u0412\u044B\u043F\u043E\u043B\u043D\u0438\u043C \u043F\u0435\u0440\u0432\u0438\u0447\u043D\u0443\u044E \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443 \u0434\u0438\u0444\u0444\u0430 \u043F\u043E\u0441\u043B\u0435 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0444\u043E\u0440\u043C\u044B\n    updateSaveAvailability();\n\n    function validate(v: WifiInfo): string | null {\n        if (!v.ssid || v.ssid.trim().length === 0) return t('specify_ssid');\n        if (v.mode === 'client' && (!v.password || v.password.length < 8)) return t('pass_too_short');\n        if (v.ip_config === 'static') {\n            if (!isValidIp(v.ip)) return t('invalid_ip');\n            if (!isValidIp(v.netmask)) return t('invalid_mask');\n            if (v.gateway && !isValidIp(v.gateway)) return t('invalid_gw');\n            if (v.dns1 && !isValidIp(v.dns1)) return t('invalid_dns1');\n            if (v.dns2 && !isValidIp(v.dns2)) return t('invalid_dns2');\n        }\n        return null;\n    }\n\n    currentSaveAction = async () => {\n        if (isOffline()) return; // \u043D\u0430 \u0432\u0441\u044F\u043A\u0438\u0439 \u0441\u043B\u0443\u0447\u0430\u0439\n        hint.textContent = '';\n        hint.className = 'hint';\n        const payload = collect();\n        const err = validate(payload);\n        if (err) {\n            hint.textContent = err;\n            hint.className = 'hint error';\n            return;\n        }\n        let savedOk = false;\n        try {\n            const w = saveBtn.offsetWidth; if (w) saveBtn.style.width = `${w}px`;\n            saveBtn.disabled = true;\n            saveBtn.textContent = t('saving');\n            setStatus('busy', '');\n            await API.postForm('/wifi/apply', payload as any);\n            // \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u043C \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0444\u0438\u043B\u044C\n            saveLocalProfile('wifi', payload);\n            hint.textContent = t('saved');\n            hint.className = 'hint success';\n            setStatus('ok', t('wifi_applied'));\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C baseline \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB \u2014 \u0434\u0438\u0444\u0444 \u043E\u0431\u043D\u0443\u043B\u044F\u0435\u0442\u0441\u044F\n            lastSaved = { ...payload } as WifiInfo;\n            savedOk = true;\n        } catch (e: any) {\n            hint.textContent = `${t('save_error')}: ${e?.message || e}`;\n            hint.className = 'hint error';\n            setStatus('error', t('wifi_save_error'));\n        } finally {\n            // \u041F\u043E\u0441\u043B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0441\u043D\u043E\u0432\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u0443\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C\u00BB.\n            // \u041F\u043E\u0441\u043B\u0435 \u043E\u0448\u0438\u0431\u043A\u0438 \u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 (\u0435\u0441\u043B\u0438 \u043D\u0435 \u043E\u0444\u0444\u043B\u0430\u0439\u043D), \u0447\u0442\u043E\u0431\u044B \u043C\u043E\u0436\u043D\u043E \u0431\u044B\u043B\u043E \u043F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C.\n            saveBtn.disabled = isOffline() || savedOk;\n            saveBtn.textContent = t('save');\n            saveBtn.style.width = '';\n            if (!saveBtn.disabled) updateSaveAvailability();\n        }\n    };\n\n    // \u041A\u043D\u043E\u043F\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u0431\u0440\u0430\u043D\u0430: \u043F\u0440\u0438 \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043B \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u0434\u0433\u0440\u0443\u0436\u0430\u044E\u0442\u0441\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\n}\n\n// -----------------------------\n// \u0420\u0430\u0437\u0434\u0435\u043B: Ethernet \u2014 \u0444\u043E\u0440\u043C\u0430\n// -----------------------------\nfunction renderEthernetForm(info?: Partial<EthernetInfo>) {\n    const body = byId<HTMLElement>('content-body');\n    const initial: EthernetInfo = {\n        ip_config: info?.ip_config === 'static' ? 'static' : 'dhcp',\n        ip: info?.ip ?? '',\n        netmask: info?.netmask ?? '',\n        gateway: info?.gateway ?? '',\n        dns1: info?.dns1 ?? '',\n        dns2: info?.dns2 ?? '',\n    };\n\n    body.innerHTML = '';\n\n    const form = document.createElement('div');\n    form.className = 'form';\n    // \u0420\u0430\u0437\u043C\u0435\u0442\u043A\u0430 \u0444\u043E\u0440\u043C\u044B \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A \u043A\u0430\u043A \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 (\u0431\u0435\u0437 JSON-\u0431\u043B\u043E\u043A\u0430 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F)\n    const settingsWrapper = document.createElement('div');\n    settingsWrapper.innerHTML = `\n    <div class=\"form-section\">\n      <div class=\"form-title\">Ethernet</div>\n      <div class=\"form-grid\">\n        <label for=\"eth-ipcfg\">${t('address_mode')}</label>\n        <select id=\"eth-ipcfg\">\n          <option value=\"dhcp\">DHCP</option>\n          <option value=\"static\">${t('static')}</option>\n        </select>\n\n        <label for=\"eth-ip\">${t('ip_address')}</label>\n        <input id=\"eth-ip\" type=\"text\" placeholder=\"192.168.1.10\">\n\n        <label for=\"eth-mask\">${t('mask')}</label>\n        <input id=\"eth-mask\" type=\"text\" placeholder=\"255.255.255.0\">\n\n        <label for=\"eth-gw\">${t('gateway')}</label>\n        <input id=\"eth-gw\" type=\"text\" placeholder=\"192.168.1.1\">\n\n        <label for=\"eth-dns1\">DNS 1</label>\n        <input id=\"eth-dns1\" type=\"text\" placeholder=\"8.8.8.8\">\n\n        <label for=\"eth-dns2\">DNS 2</label>\n        <input id=\"eth-dns2\" type=\"text\" placeholder=\"1.1.1.1\">\n      </div>\n    </div>\n\n    <div class=\"form-actions\">\n      <div id=\"eth-hint\" class=\"hint\"></div>\n    </div>\n  `;\n    while (settingsWrapper.firstChild) {\n        form.appendChild(settingsWrapper.firstChild as Node);\n    }\n\n    body.appendChild(form);\n\n    (byId<HTMLSelectElement>('eth-ipcfg').value = initial.ip_config || 'dhcp');\n    byId<HTMLInputElement>('eth-ip').value = initial.ip || '';\n    byId<HTMLInputElement>('eth-mask').value = initial.netmask || '';\n    byId<HTMLInputElement>('eth-gw').value = initial.gateway || '';\n    byId<HTMLInputElement>('eth-dns1').value = initial.dns1 || '';\n    byId<HTMLInputElement>('eth-dns2').value = initial.dns2 || '';\n\n    const ipcfg = byId<HTMLSelectElement>('eth-ipcfg');\n    const toggleStatic = () => {\n        const isStatic = ipcfg.value === 'static';\n        ['eth-ip', 'eth-mask', 'eth-gw', 'eth-dns1', 'eth-dns2'].forEach((id) => {\n            byId<HTMLInputElement>(id).disabled = !isStatic;\n        });\n    };\n    ipcfg.addEventListener('change', toggleStatic);\n    toggleStatic();\n\n    // \u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0430\u0432\u0442\u043E\u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F\n    const afMode2 = getAutoFillMode();\n    const ethProfile = loadLocalProfile<EthernetInfo>('ethernet');\n    if (afMode2 === 'fill' && ethProfile) {\n        if (ethProfile.ip_config) byId<HTMLSelectElement>('eth-ipcfg').value = ethProfile.ip_config as any;\n        if (ethProfile.ip !== undefined) byId<HTMLInputElement>('eth-ip').value = ethProfile.ip || '';\n        if (ethProfile.netmask !== undefined) byId<HTMLInputElement>('eth-mask').value = ethProfile.netmask || '';\n        if (ethProfile.gateway !== undefined) byId<HTMLInputElement>('eth-gw').value = ethProfile.gateway || '';\n        if (ethProfile.dns1 !== undefined) byId<HTMLInputElement>('eth-dns1').value = ethProfile.dns1 || '';\n        if (ethProfile.dns2 !== undefined) byId<HTMLInputElement>('eth-dns2').value = ethProfile.dns2 || '';\n        toggleStatic();\n    } else if (afMode2 === 'hints') {\n        const ipVals = uniq([initial.ip, ethProfile?.ip, '192.168.1.10']);\n        attachDatalist(byId<HTMLInputElement>('eth-ip'), ipVals, 'eth');\n\n        const maskVals = uniq([initial.netmask, ethProfile?.netmask, '255.255.255.0', '255.255.0.0']);\n        attachDatalist(byId<HTMLInputElement>('eth-mask'), maskVals, 'eth');\n\n        const gwVals = uniq([initial.gateway, ethProfile?.gateway, '192.168.1.1']);\n        attachDatalist(byId<HTMLInputElement>('eth-gw'), gwVals, 'eth');\n\n        const dnsVals1 = uniq([initial.dns1, ethProfile?.dns1, '8.8.8.8', '1.1.1.1']);\n        attachDatalist(byId<HTMLInputElement>('eth-dns1'), dnsVals1, 'eth');\n\n        const dnsVals2 = uniq([initial.dns2, ethProfile?.dns2, '1.0.0.1', '8.8.4.4']);\n        attachDatalist(byId<HTMLInputElement>('eth-dns2'), dnsVals2, 'eth');\n    }\n\n    // \u041F\u043E \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044E UI: \u0443\u0431\u0438\u0440\u0430\u0435\u043C \u0433\u0430\u043B\u043E\u0447\u043A\u0438/\u0431\u0435\u0439\u0434\u0436\u0438 \u0440\u044F\u0434\u043E\u043C \u0441 \u043F\u043E\u043B\u044F\u043C\u0438\n\n    const hint = byId<HTMLDivElement>('eth-hint');\n    const saveBtn = byId<HTMLButtonElement>('if-save-btn');\n\n    // \u041F\u0440\u0435\u0436\u043D\u044F\u044F \u043B\u043E\u0433\u0438\u043A\u0430 serverBaseline \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u2014 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u043C \u043E\u0442 \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\u00BB\n\n    // \u0421\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0448\u0438\u0440\u0438\u043D\u044B \u043A\u043D\u043E\u043F\u043A\u0438 Ethernet \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C\u00BB\n    stabilizeActionButton(saveBtn, t('saving'));\n\n    // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0434\u0438\u0444\u0444\u0430 \u0434\u043B\u044F Ethernet\n    const normalizeEth = (v: EthernetInfo): EthernetInfo => {\n        const t = (s?: string) => (s ?? '').trim();\n        const res: EthernetInfo = {\n            ip_config: (v.ip_config || '') as any,\n            ip: t(v.ip),\n            netmask: t(v.netmask),\n            gateway: t(v.gateway),\n            dns1: t(v.dns1),\n            dns2: t(v.dns2),\n        };\n        if (res.ip_config !== 'static') {\n            res.ip = '';\n            res.netmask = '';\n            res.gateway = '';\n            res.dns1 = '';\n            res.dns2 = '';\n        }\n        return res;\n    };\n\n    // \u0411\u0430\u0437\u0430 \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB: \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u2014 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0444\u043E\u0440\u043C\u044B\n    let lastSavedEth: EthernetInfo = {\n        ip_config: initial.ip_config,\n        ip: initial.ip,\n        netmask: initial.netmask,\n        gateway: initial.gateway,\n        dns1: initial.dns1,\n        dns2: initial.dns2,\n    };\n\n    const isDifferentFromBaseline = (current: EthernetInfo): boolean => {\n        const a = normalizeEth(lastSavedEth);\n        const b = normalizeEth(current);\n        return !(\n            (a.ip_config || '') === (b.ip_config || '') &&\n            (a.ip || '') === (b.ip || '') &&\n            (a.netmask || '') === (b.netmask || '') &&\n            (a.gateway || '') === (b.gateway || '') &&\n            (a.dns1 || '') === (b.dns1 || '') &&\n            (a.dns2 || '') === (b.dns2 || '')\n        );\n    };\n\n    const updateSaveAvailability = () => {\n        if (isOffline()) {\n            saveBtn.disabled = true;\n            hint.textContent = t('offline_save_unavailable_short');\n            hint.className = 'hint warn';\n            return;\n        }\n        const cur = collect();\n        const diff = isDifferentFromBaseline(cur);\n        saveBtn.disabled = !diff;\n    };\n\n    // \u0421\u0442\u0430\u0440\u0442\u043E\u0432\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435\n    saveBtn.disabled = true;\n    if (isOffline()) {\n        hint.textContent = t('offline_save_unavailable_short');\n        hint.className = 'hint warn';\n    }\n    form.addEventListener('input', updateSaveAvailability);\n    form.addEventListener('change', () => { toggleStatic(); updateSaveAvailability(); });\n\n    const collect = (): EthernetInfo => ({\n        ip_config: byId<HTMLSelectElement>('eth-ipcfg').value as any,\n        ip: byId<HTMLInputElement>('eth-ip').value,\n        netmask: byId<HTMLInputElement>('eth-mask').value,\n        gateway: byId<HTMLInputElement>('eth-gw').value,\n        dns1: byId<HTMLInputElement>('eth-dns1').value,\n        dns2: byId<HTMLInputElement>('eth-dns2').value,\n    });\n\n    // \u041F\u0435\u0440\u0432\u0438\u0447\u043D\u0430\u044F \u043E\u0446\u0435\u043D\u043A\u0430 \u0434\u0438\u0444\u0444\u0430\n    updateSaveAvailability();\n\n    function validate(v: EthernetInfo): string | null {\n        if (v.ip_config === 'static') {\n            if (!isValidIp(v.ip)) return t('invalid_ip');\n            if (!isValidIp(v.netmask)) return t('invalid_mask');\n            if (v.gateway && !isValidIp(v.gateway)) return t('invalid_gw');\n            if (v.dns1 && !isValidIp(v.dns1)) return t('invalid_dns1');\n            if (v.dns2 && !isValidIp(v.dns2)) return t('invalid_dns2');\n        }\n        return null;\n    }\n\n    currentSaveAction = async () => {\n        if (isOffline()) return;\n        hint.textContent = '';\n        hint.className = 'hint';\n        const payload = collect();\n        const err = validate(payload);\n        if (err) {\n            hint.textContent = err;\n            hint.className = 'hint error';\n            return;\n        }\n        let savedOk = false;\n        try {\n            const w = saveBtn.offsetWidth; if (w) saveBtn.style.width = `${w}px`;\n            saveBtn.disabled = true;\n            saveBtn.textContent = t('saving');\n            setStatus('busy', '');\n            await API.postForm('/ethernet/apply', payload as any);\n            // \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u043C \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0444\u0438\u043B\u044C\n            saveLocalProfile('ethernet', payload);\n            hint.textContent = t('saved');\n            hint.className = 'hint success';\n            setStatus('ok', t('eth_applied'));\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0431\u0430\u0437\u0443 \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB, \u0447\u0442\u043E\u0431\u044B \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0438\u0444\u0444\n            lastSavedEth = { ...payload } as EthernetInfo;\n            savedOk = true;\n        } catch (e: any) {\n            hint.textContent = `${t('save_error')}: ${e?.message || e}`;\n            hint.className = 'hint error';\n            setStatus('error', t('eth_save_error'));\n        } finally {\n            // \u041F\u043E\u0441\u043B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0441\u043D\u043E\u0432\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u0443\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u00AB\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C\u00BB.\n            // \u041F\u043E\u0441\u043B\u0435 \u043E\u0448\u0438\u0431\u043A\u0438 \u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0439 (\u0435\u0441\u043B\u0438 \u043D\u0435 \u043E\u0444\u0444\u043B\u0430\u0439\u043D), \u0447\u0442\u043E\u0431\u044B \u043C\u043E\u0436\u043D\u043E \u0431\u044B\u043B\u043E \u043F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C.\n            saveBtn.disabled = isOffline() || savedOk;\n            saveBtn.textContent = t('save');\n            saveBtn.style.width = '';\n            if (!saveBtn.disabled) updateSaveAvailability();\n        }\n    };\n\n    // \u041A\u043D\u043E\u043F\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u0431\u0440\u0430\u043D\u0430: \u043F\u0440\u0438 \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043B \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u0434\u0433\u0440\u0443\u0436\u0430\u044E\u0442\u0441\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\n}\n\n// -----------------------------\n// \u0420\u0430\u0437\u0434\u0435\u043B: LoRA \u2014 \u0444\u043E\u0440\u043C\u0430\n// -----------------------------\nfunction renderLoRAForm(info?: Partial<LoRAInfo>) {\n    const body = byId<HTMLElement>('content-body');\n    const initial: Required<Pick<LoRAInfo, 'mode' | 'rate' | 'ldpc'>> = {\n        mode: (info?.mode?.toUpperCase?.() === 'FSK4' ? 'FSK4' : 'FSK2'),\n        rate: String(info?.rate ?? '500'),\n        ldpc: (info?.ldpc === '512/256' ? '512/256' : '768/256'),\n    } as any;\n\n    body.innerHTML = '';\n\n    const form = document.createElement('div');\n    form.className = 'form';\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = `\n    <div class=\"form-section\">\n      <div class=\"form-title\">LoRA</div>\n      <div class=\"form-grid\">\n        <label for=\"lora-mode\">Mode</label>\n        <select id=\"lora-mode\">\n          <option value=\"FSK2\">FSK2</option>\n          <option value=\"FSK4\">FSK4</option>\n        </select>\n\n        <label for=\"lora-rate\">Rate</label>\n        <select id=\"lora-rate\">\n          <option value=\"500\">500</option>\n          <option value=\"200\">200</option>\n          <option value=\"100\">100</option>\n          <option value=\"50\">50</option>\n          <option value=\"20\">20</option>\n        </select>\n\n        <label for=\"freedv-ldpc\">LDPC</label>\n        <select id=\"freedv-ldpc\">\n          <option value=\"768/256\">768/256</option>\n          <option value=\"512/256\">512/256</option>\n        </select>\n      </div>\n    </div>\n\n    <div class=\"form-actions\">\n      <div id=\"freedv-hint\" class=\"hint\"></div>\n    </div>\n  `;\n    while (wrapper.firstChild) form.appendChild(wrapper.firstChild as Node);\n    body.appendChild(form);\n\n    byId<HTMLSelectElement>('freedv-mode').value = initial.mode as string;\n    byId<HTMLSelectElement>('freedv-rate').value = String(initial.rate);\n    byId<HTMLSelectElement>('freedv-ldpc').value = initial.ldpc as string;\n\n    const hint = byId<HTMLDivElement>('freedv-hint');\n    const saveBtn = byId<HTMLButtonElement>('if-save-btn');\n    stabilizeActionButton(saveBtn, t('saving'));\n\n    // \u0411\u0430\u0437\u0430 \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB \u0434\u043B\u044F FreeDV \u2014 \u0431\u0435\u0440\u0451\u043C \u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0444\u043E\u0440\u043C\u044B\n    let lastSavedFree: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>> = { ...initial } as any;\n\n    function collect(): Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>> {\n        return {\n            mode: byId<HTMLSelectElement>('freedv-mode').value as any,\n            rate: byId<HTMLSelectElement>('freedv-rate').value,\n            ldpc: byId<HTMLSelectElement>('freedv-ldpc').value as any,\n        };\n    }\n\n    function validate(v: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>>): string | null {\n        const modes = ['FSK2', 'FSK4'];\n        const rates = ['500','200','100','50','20'];\n        const ldpcl = ['768/256','512/256'];\n        if (!modes.includes(String(v.mode))) return t('invalid_mode');\n        if (!rates.includes(String(v.rate))) return t('invalid_rate');\n        if (!ldpcl.includes(String(v.ldpc))) return t('invalid_ldpc');\n        return null;\n    }\n\n    function isDifferentFromBaseline(cur: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>>): boolean {\n        return (\n            String(lastSavedFree.mode).toUpperCase() !== String(cur.mode).toUpperCase() ||\n            String(lastSavedFree.rate) !== String(cur.rate) ||\n            String(lastSavedFree.ldpc) !== String(cur.ldpc)\n        );\n    }\n\n    function updateSaveAvailability() {\n        const cur = collect();\n        const err = validate(cur);\n        if (err) {\n            hint.textContent = err;\n            hint.className = 'hint error';\n        } else if (isDifferentFromBaseline(cur)) {\n            hint.textContent = t('unsaved_changes');\n            hint.className = 'hint';\n        } else {\n            hint.textContent = '';\n            hint.className = 'hint';\n        }\n        saveBtn.disabled = isOffline() || !!err || !isDifferentFromBaseline(cur);\n    }\n\n    ['freedv-mode','freedv-rate','freedv-ldpc'].forEach((id) => {\n        byId<HTMLElement>(id).addEventListener('change', updateSaveAvailability as any);\n    });\n    updateSaveAvailability();\n\n    currentSaveAction = async () => {\n        const payload = collect();\n        const err = validate(payload);\n        if (err) {\n            hint.textContent = err;\n            hint.className = 'hint error';\n            return;\n        }\n        let savedOk = false;\n        try {\n            const w = saveBtn.offsetWidth; if (w) saveBtn.style.width = `${w}px`;\n            saveBtn.disabled = true;\n            saveBtn.textContent = t('saving');\n            setStatus('busy', '');\n            await API.postForm('/freedv/apply', payload as any);\n            hint.textContent = t('saved');\n            hint.className = 'hint success';\n            setStatus('ok', t('freedv_applied'));\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB\n            lastSavedFree = { ...payload } as any;\n            savedOk = true;\n        } catch (e: any) {\n            hint.textContent = `${t('save_error')}: ${e?.message || e}`;\n            hint.className = 'hint error';\n            setStatus('error', t('freedv_save_error'));\n        } finally {\n            saveBtn.disabled = isOffline() || savedOk;\n            saveBtn.textContent = t('save');\n            saveBtn.style.width = '';\n            if (!saveBtn.disabled) updateSaveAvailability();\n        }\n    };\n}\n\n// -----------------------------\n// \u0420\u0430\u0437\u0434\u0435\u043B: FreeDV \u2014 \u0444\u043E\u0440\u043C\u0430\n// -----------------------------\nfunction renderFreeDVForm(info?: Partial<FreeDVInfo>) {\n    const body = byId<HTMLElement>('content-body');\n    const initial: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>> = {\n        mode: (info?.mode?.toUpperCase?.() === 'FSK4' ? 'FSK4' : 'FSK2'),\n        rate: String(info?.rate ?? '500'),\n        ldpc: (info?.ldpc === '512/256' ? '512/256' : '768/256'),\n    } as any;\n\n    body.innerHTML = '';\n\n    const form = document.createElement('div');\n    form.className = 'form';\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = `\n    <div class=\"form-section\">\n      <div class=\"form-title\">FreeDV</div>\n      <div class=\"form-grid\">\n        <label for=\"freedv-mode\">Mode</label>\n        <select id=\"freedv-mode\">\n          <option value=\"FSK2\">FSK2</option>\n          <option value=\"FSK4\">FSK4</option>\n        </select>\n\n        <label for=\"freedv-rate\">Rate</label>\n        <select id=\"freedv-rate\">\n          <option value=\"500\">500</option>\n          <option value=\"200\">200</option>\n          <option value=\"100\">100</option>\n          <option value=\"50\">50</option>\n          <option value=\"20\">20</option>\n        </select>\n\n        <label for=\"freedv-ldpc\">LDPC</label>\n        <select id=\"freedv-ldpc\">\n          <option value=\"768/256\">768/256</option>\n          <option value=\"512/256\">512/256</option>\n        </select>\n      </div>\n    </div>\n\n    <div class=\"form-actions\">\n      <div id=\"freedv-hint\" class=\"hint\"></div>\n    </div>\n  `;\n    while (wrapper.firstChild) form.appendChild(wrapper.firstChild as Node);\n    body.appendChild(form);\n\n    byId<HTMLSelectElement>('freedv-mode').value = initial.mode as string;\n    byId<HTMLSelectElement>('freedv-rate').value = String(initial.rate);\n    byId<HTMLSelectElement>('freedv-ldpc').value = initial.ldpc as string;\n\n    const hint = byId<HTMLDivElement>('freedv-hint');\n    const saveBtn = byId<HTMLButtonElement>('if-save-btn');\n    stabilizeActionButton(saveBtn, t('saving'));\n\n    // \u0411\u0430\u0437\u0430 \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB \u0434\u043B\u044F FreeDV \u2014 \u0431\u0435\u0440\u0451\u043C \u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0444\u043E\u0440\u043C\u044B\n    let lastSavedFree: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>> = { ...initial } as any;\n\n    function collect(): Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>> {\n        return {\n            mode: byId<HTMLSelectElement>('freedv-mode').value as any,\n            rate: byId<HTMLSelectElement>('freedv-rate').value,\n            ldpc: byId<HTMLSelectElement>('freedv-ldpc').value as any,\n        };\n    }\n\n    function validate(v: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>>): string | null {\n        const modes = ['FSK2', 'FSK4'];\n        const rates = ['500','200','100','50','20'];\n        const ldpcl = ['768/256','512/256'];\n        if (!modes.includes(String(v.mode))) return t('invalid_mode');\n        if (!rates.includes(String(v.rate))) return t('invalid_rate');\n        if (!ldpcl.includes(String(v.ldpc))) return t('invalid_ldpc');\n        return null;\n    }\n\n    function isDifferentFromBaseline(cur: Required<Pick<FreeDVInfo, 'mode' | 'rate' | 'ldpc'>>): boolean {\n        return (\n            String(lastSavedFree.mode).toUpperCase() !== String(cur.mode).toUpperCase() ||\n            String(lastSavedFree.rate) !== String(cur.rate) ||\n            String(lastSavedFree.ldpc) !== String(cur.ldpc)\n        );\n    }\n\n    function updateSaveAvailability() {\n        const cur = collect();\n        const err = validate(cur);\n        if (err) {\n            hint.textContent = err;\n            hint.className = 'hint error';\n        } else if (isDifferentFromBaseline(cur)) {\n            hint.textContent = t('unsaved_changes');\n            hint.className = 'hint';\n        } else {\n            hint.textContent = '';\n            hint.className = 'hint';\n        }\n        saveBtn.disabled = isOffline() || !!err || !isDifferentFromBaseline(cur);\n    }\n\n    ['freedv-mode','freedv-rate','freedv-ldpc'].forEach((id) => {\n        byId<HTMLElement>(id).addEventListener('change', updateSaveAvailability as any);\n    });\n    updateSaveAvailability();\n\n    currentSaveAction = async () => {\n        const payload = collect();\n        const err = validate(payload);\n        if (err) {\n            hint.textContent = err;\n            hint.className = 'hint error';\n            return;\n        }\n        let savedOk = false;\n        try {\n            const w = saveBtn.offsetWidth; if (w) saveBtn.style.width = `${w}px`;\n            saveBtn.disabled = true;\n            saveBtn.textContent = t('saving');\n            setStatus('busy', '');\n            await API.postForm('/freedv/apply', payload as any);\n            hint.textContent = t('saved');\n            hint.className = 'hint success';\n            setStatus('ok', t('freedv_applied'));\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u00AB\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u00BB\n            lastSavedFree = { ...payload } as any;\n            savedOk = true;\n        } catch (e: any) {\n            hint.textContent = `${t('save_error')}: ${e?.message || e}`;\n            hint.className = 'hint error';\n            setStatus('error', t('freedv_save_error'));\n        } finally {\n            saveBtn.disabled = isOffline() || savedOk;\n            saveBtn.textContent = t('save');\n            saveBtn.style.width = '';\n            if (!saveBtn.disabled) updateSaveAvailability();\n        }\n    };\n}\n\n// -----------------------------\n// \u0420\u0430\u0437\u0434\u0435\u043B: \u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438 \u2014 \u0444\u043E\u0440\u043C\u0430\n// -----------------------------\nfunction renderUsersForm(data: { users: { username: string, is_admin: boolean }[] }) {\n    const body = byId<HTMLElement>('content-body');\n    body.innerHTML = '';\n\n    const form = document.createElement('div');\n    form.className = 'form';\n\n    const secList = document.createElement('div');\n    secList.className = 'form-section';\n    secList.innerHTML = `<div class=\"form-title\">${t('user_management')}</div>`;\n    \n    const users = (data && data.users) || [];\n\n    const table = document.createElement('table');\n    table.className = 'users-table';\n    const thead = document.createElement('thead');\n    thead.innerHTML = `\n        <tr>\n            <th>${t('username')}</th>\n            <th style=\"text-align:center\">${t('is_admin')}</th>\n            <th style=\"text-align:right\"></th>\n        </tr>\n    `;\n    table.appendChild(thead);\n    \n    const tbody = document.createElement('tbody');\n    users.forEach(u => {\n        const tr = document.createElement('tr');\n        tr.innerHTML = `\n            <td>${u.username}</td>\n            <td style=\"text-align:center\">${u.is_admin ? '\u2705' : ''}</td>\n            <td style=\"text-align:right\">\n                ${u.username !== Auth.getInstance().getCurrentUser() ? `<button class=\"btn btn-sm danger del-user\" data-username=\"${u.username}\">${t('delete')}</button>` : ''}\n            </td>\n        `;\n        tbody.appendChild(tr);\n    });\n    table.appendChild(tbody);\n    secList.appendChild(table);\n\n    // \u0424\u043E\u0440\u043C\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F\n    const secAdd = document.createElement('div');\n    secAdd.className = 'form-section';\n    secAdd.innerHTML = `<div class=\"form-title\">${t('add_user')}</div>`;\n    \n    const grid = document.createElement('div');\n    grid.className = 'form-grid';\n    \n    const labName = document.createElement('label');\n    labName.textContent = t('username');\n    const inpName = document.createElement('input');\n    inpName.type = 'text';\n    \n    const labPass = document.createElement('label');\n    labPass.textContent = t('password_label');\n    const inpPass = document.createElement('input');\n    inpPass.type = 'password';\n    \n    const btnAdd = document.createElement('button');\n    btnAdd.className = 'btn primary';\n    btnAdd.textContent = t('add');\n    \n    grid.appendChild(labName);\n    grid.appendChild(inpName);\n    grid.appendChild(labPass);\n    grid.appendChild(inpPass);\n    grid.appendChild(document.createElement('div'));\n    grid.appendChild(btnAdd);\n    \n    secAdd.appendChild(grid);\n    form.appendChild(secList);\n    form.appendChild(secAdd);\n    body.appendChild(form);\n\n    // Listeners\n    btnAdd.addEventListener('click', async () => {\n        const username = inpName.value;\n        const password = inpPass.value;\n        if (!username || !password) return;\n        try {\n            setStatus('busy', '');\n            await API.postForm('/auth/register', { username, password });\n            showToast('ok', t('saved'));\n            loadSectionData('users'); // Refresh\n        } catch (e: any) {\n            setStatus('error', e.message);\n        }\n    });\n\n    tbody.querySelectorAll('.del-user').forEach(btn => {\n        btn.addEventListener('click', async () => {\n            const username = (btn as HTMLElement).getAttribute('data-username');\n            if (!username) return;\n            if (!confirm(`Delete user ${username}?`)) return;\n            try {\n                setStatus('busy', '');\n                await API.postForm('/auth/delete', { username });\n                showToast('ok', t('saved'));\n                loadSectionData('users'); // Refresh\n            } catch (e: any) {\n                setStatus('error', e.message);\n            }\n        });\n    });\n}\n"],
  "mappings": "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",
  "names": ["detectBase", "w", "isOffline", "buildQuery", "params", "usp", "k", "v", "q", "joinUrl", "base", "path", "b", "p", "withTimeout", "promise", "ms", "ctl", "t", "res", "e", "ApiError", "ApiClient", "API", "init_api", "__esmMin", "status", "message", "opts", "cb", "url", "req", "r", "ct", "details", "j", "text", "m", "msg", "data", "body", "getLang", "currentLang", "setLang", "lang", "t", "key", "translations", "availableLanguages", "init_i18n", "__esmMin", "Auth", "init_auth", "__esmMin", "init_api", "init_i18n", "_Auth", "API", "callback", "isOffline", "status", "e", "ApiError", "t", "username", "password", "errorEl", "res", "err", "footer", "isFirst", "passwordConfirm", "require_index", "__commonJSMin", "init_api", "init_i18n", "init_auth", "ICON_EYE", "ICON_EYE_OFF", "AF_MODE_KEY", "getAutoFillMode", "WIFI_PROFILE_KEY", "ETH_PROFILE_KEY", "saveLocalProfile", "kind", "data", "key", "loadLocalProfile", "s", "sections", "getVisibleSections", "list", "Auth", "t", "initUI", "app", "shell", "sidebar", "logo", "langSelect", "availableLanguages", "opt", "o", "getLang", "setLang", "nav", "idx", "btn", "selectSection", "content", "header", "h1", "status", "ifSaveBtn", "currentSectionId", "handleInterfacesSave", "currentSaveAction", "ifAddBtn", "handleInterfacesAdd", "ifDelBtn", "handleInterfacesDelete", "fillBtn", "rect", "refreshCurrentSectionData", "stabilizeActionButton", "resetBtn", "clearCurrentFormFields", "body", "toasts", "id", "el", "section", "titleEl", "bodyEl", "currentH", "isInterfaces", "sectionsWithSave", "updateInterfacesHeaderUI", "updateStatusBar", "loadSectionData", "setStatus", "API", "renderWifiForm", "parseInfoForSection", "renderEthernetForm", "renderLoRAForm", "renderFreeDVForm", "renderRnsdConfig", "raw", "unwrapDataPayload", "j", "ifSaveAll", "interfacesBaselineJSON", "IF_BASELINE_KEY", "renderInterfacesForm", "renderUsersForm", "pre", "e", "isOffline", "IF_STORAGE_KEY", "IF_CUR_KEY", "RN_PRESETS", "INTERFACE_TYPES", "ifLoadAll", "arr", "ifGetCurrentId", "ifSetCurrentId", "typeDefByValue", "v", "typeLabel", "buildDefaultsForType", "def", "out", "f", "nextInterfaceName", "base", "n", "byId", "curId", "cur", "i", "form", "empty", "secList", "gridList", "labSel", "sel", "it", "secName", "gridName", "labName", "inputName", "item", "secType", "gridType", "labType", "selType", "renderSettings", "secSet", "titleSet", "contSet", "itemId", "container", "tdef", "defaults", "table", "hTitle", "hChip", "hPin", "rows", "applySave", "value", "a", "r", "title", "chipInp", "chipDefault", "chipStored", "pinInp", "pinDefault", "pinStored", "tableKeys", "remainingFields", "grid", "renderField", "lab", "input", "optv", "p", "bwInp", "crInp", "sfInp", "inp", "attachDatalist", "preSel", "addBtn", "delBtn", "saveBtn", "hasCur", "hasDiff", "type", "next", "STATUS_COLOR_MIN_INTERVAL", "lastIndicatorSwitch", "indicatorTimer", "indicatorPending", "showToast", "text", "toast", "applyIndicator", "hasText", "scheduleIndicator", "elapsed", "delay", "startApp", "busyText", "original", "w1", "w2", "minW", "prevHeight", "prevScroll", "clear", "uniq", "values", "seen", "options", "idSuffix", "listId", "dl", "currentOptions", "isValidIp", "x", "obj", "parseKeyValueString", "inner", "norm", "normalizeKeys", "toStr", "normalizeIpConfig", "src", "lines", "line", "val", "eqIdx", "colonIdx", "wrap", "parts", "isSpiKey", "k", "kk", "spi", "rnsd", "extraSpi", "rnsdBox", "rnsdTitle", "rnsdPre", "spiBox", "spiTitle", "getStr", "spiSrc", "buildSpiDevice", "dev", "portStr", "csStr", "c", "m", "normChip", "normPin", "initialSpi", "setVal", "map", "target", "info", "initial", "settingsWrapper", "ipcfg", "toggleStatic", "isStatic", "afMode", "wifiProfile", "ssidVals", "ipVals", "maskVals", "gwVals", "dnsVals1", "dnsVals2", "passInput", "passToggle", "passIconPath", "toShow", "len", "hint", "normalizeWifi", "res", "lastSaved", "isDifferentFromBaseline", "current", "b", "pwChanged", "eq", "updateSaveAvailability", "collect", "diff", "validate", "payload", "err", "savedOk", "w", "afMode2", "ethProfile", "normalizeEth", "lastSavedEth", "wrapper", "lastSavedFree", "modes", "rates", "ldpcl", "users", "thead", "tbody", "u", "tr", "secAdd", "inpName", "labPass", "inpPass", "btnAdd", "username", "password"]
}
